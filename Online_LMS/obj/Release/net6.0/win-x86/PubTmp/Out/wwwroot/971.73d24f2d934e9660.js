"use strict";(self.webpackChunkcreativealigner_angular=self.webpackChunkcreativealigner_angular||[]).push([[971],{5971:(zn,R,d)=>{d.r(R),d.d(R,{AdminModule:()=>Vn});var f=d(9808),A=d(6609),l=d(2382),F=d(520),J=d(7038),e=d(5e3);let O=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[A.lC],encapsulation:2}),i})();var _=d(6166),w=d(4576),p=d(9219),M=d(2744),q=d(7258),S=d(7265);function Y(i,s){1&i&&(e._uU(0),e.ALo(1,"date")),2&i&&e.hij(" ",e.xi3(1,1,s.value,"yyyy-MM-dd")," ")}let H=(()=>{class i{constructor(t,n,o){this.api=t,this.auth=n,this.nav=o,this.loadingIndicator=!1,this.TotalCount=0,this.pageNumber=0,this.ColumnMode=_.hq,this.SelectionType=_.RT,this.caseList=[],this.SearchModel=new p.uE,this.countries=[],this.states=[],this.selected=[],o.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){let t=[];t.push(this.getEmptyCountry()),this.auth.countries.forEach(function(n){t.push(n)}),this.countries=t,this.states=this.getStates(),this.doSearchCases()}getStates(){let t=[];return t.push(this.getState("","All")),t.push(this.getState("Incomplete","Incomplete Case")),t.push(this.getState("PendingCaseApproval","Pending Case Approval")),t.push(this.getState("Returned","Returned")),t.push(this.getState("Accepted","Accepted")),t.push(this.getState("RequestRetainer","Request Retainer")),t.push(this.getState("ReadyForImpressionsCollection","Impressions Collection")),t.push(this.getState("ImpressionsShipped","Impressions Shipped")),t.push(this.getState("ImpressionsReceived","Impressions Received")),t.push(this.getState("PendingOrthodontistApproval","Pending Orthodontist Approval")),t.push(this.getState("AmendRevision","Request Revision Amendment")),t.push(this.getState("PendingTSApproval","Pending TS Approval")),t.push(this.getState("RequestNewRevision","Request New Revision")),t.push(this.getState("Manufacturing","Manufacturing")),t.push(this.getState("Approved","Approved")),t.push(this.getState("ReadyForShipping","Ready For Shipping")),t.push(this.getState("Active","Active")),t.push(this.getState("RequestNextShipment","Request Next Shipment")),t.push(this.getState("ReplaceMissing","Replace Missing")),t.push(this.getState("RequestRefinments","request Refinements")),t.push(this.getState("RequestMidcourseAdjusment","Request Midcourse Adjusment")),t.push(this.getState("Completed","Completed")),t.push(this.getState("Archived","Archived")),t}getState(t,n){let o=new p.Ic;return o.ID=t,o.Name=n,o}getEmptyCountry(){let t=new w.b3;return t.ID="00000000-0000-0000-0000-000000000000",t.Country="All",t}doSearch(){this.TotalCount=0,this.pageNumber=0,this.SearchModel.Page=0,this.doSearchCases()}doSearchCases(){this.loadingIndicator=!0,this.caseList=[],this.SearchModel.Page=this.pageNumber,null==this.SearchModel.CountryID&&(this.SearchModel.CountryID=this.getEmptyCountry().ID),null==this.SearchModel.States&&(this.SearchModel.States=""),"MedicalRepresentative"==this.auth.user.Role&&(this.SearchModel.MedicalRepID=this.auth.user.ID),this.api.getCases(this.SearchModel).subscribe(t=>{console.debug(t),this.loadingIndicator=!1,t&&t.Cases.length>0&&(this.caseList=t.Cases,this.TotalCount=t.TotalCount)},t=>{this.loadingIndicator=!1,console.debug(t),t.message?alert(t.message):alert("Failed")})}onSort(t){console.debug(t),t&&t.sorts&&t.sorts.length>0&&(this.SearchModel.SortDir=t.sorts[0].dir,this.SearchModel.SortProp=t.sorts[0].prop,this.doSearchCases())}setPage(t){console.debug(t),this.pageNumber=t.offset,this.doSearchCases()}reviewCase(t){this.nav.navigate(["/admin/admin-case-review",{id:t.selected[0].Case.ID}])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(q.O),e.Y36(A.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-cases-list"]],decls:36,vars:21,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row",3,"ngSubmit"],["searchForm",""],[1,"col-sm-4"],["for","exampleInputUsername1",1,"form-label"],["id","searchCountryID","name","CountryID","placeholder","Country","bindLabel","Country","bindValue","ID",3,"items","ngModel","searchable","change","ngModelChange"],["searchCountryID","ngModel"],["id","searchStateID","name","States","placeholder","Case Status","bindLabel","Name","bindValue","ID",3,"items","ngModel","searchable","change","ngModelChange"],["searchStateID","ngModel"],["for","exampleInputEmail1",1,"form-label"],[1,"input-group"],["type","text","id","searchTextID","placeholder","Search","name","searchText",1,"form-control",3,"ngModel","ngModelChange"],["searchTextID","ngModel"],["type","submit",1,"input-group-text","btn-link","custom_btn_icon"],[1,"feather","icon-search"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","scrollbarH","footerHeight","limit","externalPaging","externalSorting","count","offset","selectionType","page","sort","select"],["name","Number","prop","CaseNumber",3,"width"],["name","Patient","prop","Name"],["name","Doctor","prop","Doctor"],["name","Country","prop","Country"],["name","Status","prop","CaseStage"],["name","Status Date","prop","StageDate",3,"width"],["ngx-datatable-cell-template",""],["name","Revision","prop","RevisionNumber",3,"width"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h6",4),e._uU(5,"Cases List"),e.qZA(),e.TgZ(6,"form",5,6),e.NdJ("ngSubmit",function(){return n.doSearch()}),e.TgZ(8,"div",7),e.TgZ(9,"label",8),e._uU(10,"Country"),e.qZA(),e.TgZ(11,"ng-select",9,10),e.NdJ("change",function(){return n.doSearch()})("ngModelChange",function(a){return n.SearchModel.CountryID=a}),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"label",8),e._uU(15,"State"),e.qZA(),e.TgZ(16,"ng-select",11,12),e.NdJ("change",function(){return n.doSearch()})("ngModelChange",function(a){return n.SearchModel.States=a}),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"label",13),e._uU(20,"Searching"),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"input",15,16),e.NdJ("ngModelChange",function(a){return n.SearchModel.SearchText=a}),e.qZA(),e.TgZ(24,"button",17),e._UZ(25,"i",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",19),e.TgZ(27,"ngx-datatable",20),e.NdJ("page",function(a){return n.setPage(a)})("sort",function(a){return n.onSort(a)})("select",function(a){return n.reviewCase(a)}),e._UZ(28,"ngx-datatable-column",21),e._UZ(29,"ngx-datatable-column",22),e._UZ(30,"ngx-datatable-column",23),e._UZ(31,"ngx-datatable-column",24),e._UZ(32,"ngx-datatable-column",25),e.TgZ(33,"ngx-datatable-column",26),e.YNc(34,Y,2,4,"ng-template",27),e.qZA(),e._UZ(35,"ngx-datatable-column",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("items",n.countries)("ngModel",n.SearchModel.CountryID)("searchable",!1),e.xp6(5),e.Q6J("items",n.states)("ngModel",n.SearchModel.States)("searchable",!1),e.xp6(6),e.Q6J("ngModel",n.SearchModel.SearchText),e.xp6(5),e.Q6J("rows",n.caseList)("loadingIndicator",n.loadingIndicator)("columnMode",n.ColumnMode.force)("scrollbarH",!0)("footerHeight",50)("limit",10)("externalPaging",!0)("externalSorting",!0)("count",n.TotalCount)("offset",n.pageNumber)("selectionType",n.SelectionType.single),e.xp6(1),e.Q6J("width",60),e.xp6(5),e.Q6J("width",80),e.xp6(2),e.Q6J("width",60))},directives:[l._Y,l.JL,l.F,S.w9,l.JJ,l.On,l.Fj,_.nE,_.UC,_.vq],pipes:[f.uU],styles:[""]}),i})();var D=d(358),Z=d(43),V=d(4168),z=d(2062),U=d(9189),$=d(1534),G=d(7048);function j(i,s){1&i&&e._UZ(0,"th",6)}function B(i,s){if(1&i&&(e.ynx(0),e.YNc(1,j,1,0,"th",5),e.TgZ(2,"th",6),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA(),e.BQk()),2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(3),e.Oqu(t.LabelUp)}}function W(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function X(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,W,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function K(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function ee(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,K,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function te(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function ne(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,te,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function ie(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function oe(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,ie,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function se(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function ae(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,se,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function re(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function le(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,re,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function de(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function ce(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,de,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function ge(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function pe(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,ge,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function ue(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function _e(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,ue,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function me(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function he(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,me,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function Ce(i,s){1&i&&e._UZ(0,"th",6)}function ve(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ce,1,0,"th",5),e.TgZ(2,"th",6),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA(),e.BQk()),2&i){const t=s.$implicit,n=s.index,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(3),e.Oqu(o.Data.HasBothLabel?t.LabelDown:t.LabelUp)}}function fe(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function Ze(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,fe,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function Te(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function be(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,Te,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function xe(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function Ae(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,xe,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function Me(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function qe(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,Me,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function we(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function Se(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,we,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function Ue(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function ye(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,Ue,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function Ne(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function Ie(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,Ne,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function Re(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function Je(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,Re,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function De(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function Qe(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,De,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function ke(i,s){if(1&i&&(e.TgZ(0,"td",6),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.LabelUp)}}function Ee(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,ke,2,1,"td",5),e.TgZ(2,"td",6),e.TgZ(3,"input",7),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.RowValue=o}),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,n=s.index;e.xp6(1),e.Q6J("ngIf",0==n),e.xp6(2),e.Q6J("ngModel",t.RowValue)}}function Pe(i,s){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"br"),e.TgZ(2,"h6",1),e._uU(3," Lower Teeth "),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"div",2),e.TgZ(6,"table",3),e.TgZ(7,"tr"),e.YNc(8,B,5,2,"ng-container",4),e.qZA(),e.TgZ(9,"tr"),e.YNc(10,X,4,2,"ng-container",4),e.qZA(),e.TgZ(11,"tr"),e.YNc(12,ee,4,2,"ng-container",4),e.qZA(),e.TgZ(13,"tr"),e.YNc(14,ne,4,2,"ng-container",4),e.qZA(),e.TgZ(15,"tr"),e.YNc(16,oe,4,2,"ng-container",4),e.qZA(),e.TgZ(17,"tr"),e.YNc(18,ae,4,2,"ng-container",4),e.qZA(),e.TgZ(19,"tr"),e.YNc(20,le,4,2,"ng-container",4),e.qZA(),e.TgZ(21,"tr"),e.YNc(22,ce,4,2,"ng-container",4),e.qZA(),e.TgZ(23,"tr"),e.YNc(24,pe,4,2,"ng-container",4),e.qZA(),e.TgZ(25,"tr"),e.YNc(26,_e,4,2,"ng-container",4),e.qZA(),e.TgZ(27,"tr"),e.YNc(28,he,4,2,"ng-container",4),e.qZA(),e.qZA(),e.qZA(),e._UZ(29,"br"),e._UZ(30,"br"),e.TgZ(31,"h6",1),e._uU(32," Upper Teeth "),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"div",2),e.TgZ(35,"table",3),e.TgZ(36,"tr"),e.YNc(37,ve,5,2,"ng-container",4),e.qZA(),e.TgZ(38,"tr"),e.YNc(39,Ze,4,2,"ng-container",4),e.qZA(),e.TgZ(40,"tr"),e.YNc(41,be,4,2,"ng-container",4),e.qZA(),e.TgZ(42,"tr"),e.YNc(43,Ae,4,2,"ng-container",4),e.qZA(),e.TgZ(44,"tr"),e.YNc(45,qe,4,2,"ng-container",4),e.qZA(),e.TgZ(46,"tr"),e.YNc(47,Se,4,2,"ng-container",4),e.qZA(),e.TgZ(48,"tr"),e.YNc(49,ye,4,2,"ng-container",4),e.qZA(),e.TgZ(50,"tr"),e.YNc(51,Ie,4,2,"ng-container",4),e.qZA(),e.TgZ(52,"tr"),e.YNc(53,Je,4,2,"ng-container",4),e.qZA(),e.TgZ(54,"tr"),e.YNc(55,Qe,4,2,"ng-container",4),e.qZA(),e.TgZ(56,"tr"),e.YNc(57,Ee,4,2,"ng-container",4),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.Data.UpperIprAmount),e.xp6(2),e.Q6J("ngForOf",t.Data.UStripMesial),e.xp6(2),e.Q6J("ngForOf",t.Data.UStripDistal),e.xp6(2),e.Q6J("ngForOf",t.Data.UInclination),e.xp6(2),e.Q6J("ngForOf",t.Data.UInclinationStep),e.xp6(2),e.Q6J("ngForOf",t.Data.UAngulation),e.xp6(2),e.Q6J("ngForOf",t.Data.UAngulationStep),e.xp6(2),e.Q6J("ngForOf",t.Data.URotationStep),e.xp6(2),e.Q6J("ngForOf",t.Data.UMesialStep),e.xp6(2),e.Q6J("ngForOf",t.Data.UVestibularStep),e.xp6(2),e.Q6J("ngForOf",t.Data.UOcclusalStep),e.xp6(9),e.Q6J("ngForOf",t.Data.UpperIprAmount),e.xp6(2),e.Q6J("ngForOf",t.Data.LStripMesial),e.xp6(2),e.Q6J("ngForOf",t.Data.LStripDistal),e.xp6(2),e.Q6J("ngForOf",t.Data.LInclination),e.xp6(2),e.Q6J("ngForOf",t.Data.LInclinationStep),e.xp6(2),e.Q6J("ngForOf",t.Data.LAngulation),e.xp6(2),e.Q6J("ngForOf",t.Data.LAngulationStep),e.xp6(2),e.Q6J("ngForOf",t.Data.LRotationStep),e.xp6(2),e.Q6J("ngForOf",t.Data.LMesialStep),e.xp6(2),e.Q6J("ngForOf",t.Data.LVestibularStep),e.xp6(2),e.Q6J("ngForOf",t.Data.LOcclusalStep)}}let Le=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-teeth-move-chart"]],inputs:{Data:"Data"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"card-title"],[2,"overflow-x","auto"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["class","move-chart-revision-col",4,"ngIf"],[1,"move-chart-revision-col"],["type","text","NumbersOnly","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&e.YNc(0,Pe,58,22,"div",0),2&t&&e.Q6J("ngIf",n.Data)},directives:[f.O5,f.sg,l.Fj,G.G,l.JJ,l.On],styles:[""]}),i})();const Fe=["wizardForm"],Oe=["ipr_teeth"],Ye=["chart_move_teeth"],He=["newRevisionInfo"];function Ve(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",4),e.TgZ(2,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).startNewRevision()}),e._UZ(3,"span",6),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Udp("visibility",t.isLoading?"visible":"hidden"),e.xp6(1),e.hij(" ","AmendRevision"==t.api.case.Data.CaseStage?"Update Revision":"New Revision"," ")}}function ze(i,s){1&i&&e._UZ(0,"i",38)}function $e(i,s){1&i&&(e.TgZ(0,"p",39),e._uU(1,"Revision name is required"),e.qZA())}function Ge(i,s){1&i&&e._UZ(0,"i",40)}function je(i,s){1&i&&e._UZ(0,"i",41)}function Be(i,s){1&i&&e._UZ(0,"i",42)}function We(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"aw-wizard",8,9),e.TgZ(2,"aw-wizard-step",10),e.YNc(3,ze,1,0,"ng-template",11),e.TgZ(4,"form",12,13),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw(3).noteStep()}),e.TgZ(6,"div",1),e.TgZ(7,"div",14),e.TgZ(8,"label",15),e._uU(9,"Revision name:"),e.qZA(),e.TgZ(10,"input",16,17),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).Data.Revision.RevisionName=o}),e.qZA(),e.YNc(12,$e,2,0,"p",18),e.qZA(),e.qZA(),e.TgZ(13,"div",1),e.TgZ(14,"div",14),e.TgZ(15,"label",19),e._uU(16,"Design Embeded URL:"),e.qZA(),e.TgZ(17,"input",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).Data.Revision.DesignEmbededURL=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",1),e.TgZ(19,"div",14),e.TgZ(20,"label",21),e._uU(21,"Package:"),e.qZA(),e.TgZ(22,"div",22),e.TgZ(23,"ng-select",23),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).Data.Revision.PackageID=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",1),e.TgZ(25,"div",14),e.TgZ(26,"label",24),e._uU(27,"Notes:"),e.qZA(),e.TgZ(28,"textarea",25),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(3).Data.Revision.DesignerNotes=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"button",26),e._uU(31,"Next"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"aw-wizard-step",27),e.YNc(33,Ge,1,0,"ng-template",11),e.TgZ(34,"form",12),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw(3).iprStep()}),e._UZ(35,"app-ipr-teeth",null,28),e.TgZ(37,"div",4),e.TgZ(38,"button",29),e._uU(39,"Back"),e.qZA(),e.TgZ(40,"button",26),e._uU(41,"Next"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"aw-wizard-step",30),e.YNc(43,je,1,0,"ng-template",11),e.TgZ(44,"form",12),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw(3).toothMoveStep()}),e._UZ(45,"app-teeth-move-chart",null,31),e.TgZ(47,"div",4),e.TgZ(48,"button",29),e._uU(49,"Back"),e.qZA(),e.TgZ(50,"button",26),e._UZ(51,"span",6),e._uU(52," Submit "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"aw-wizard-step",32),e.YNc(54,Be,1,0,"ng-template",11),e.TgZ(55,"div",33),e._UZ(56,"i",34),e.TgZ(57,"h3",35),e._uU(58,"Revision Completed"),e.qZA(),e.TgZ(59,"p",36),e._uU(60,"Revision submiting has been completed"),e.qZA(),e.qZA(),e.TgZ(61,"div",4),e.TgZ(62,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).stepDone()}),e._uU(63,"Finish"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(11),n=e.oxw(3);e.Q6J("disableNavigationBar",!0),e.xp6(10),e.Q6J("ngModel",n.Data.Revision.RevisionName),e.xp6(2),e.Q6J("ngIf",t.invalid&&n.newRevisionInfoSub),e.xp6(5),e.Q6J("ngModel",n.Data.Revision.DesignEmbededURL),e.xp6(6),e.Q6J("items",n.Data.Packages)("ngModel",n.Data.Revision.PackageID)("searchable",!1),e.xp6(5),e.Q6J("ngModel",n.Data.Revision.DesignerNotes),e.xp6(23),e.Udp("visibility",n.saving_revision?"visible":"hidden")}}function Xe(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1,"Loading ......"),e.qZA())}function Ke(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,We,64,10,"aw-wizard",7),e.YNc(2,Xe,2,0,"div",3),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isLoading)}}function et(i,s){if(1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.YNc(2,Ve,5,3,"div",3),e.YNc(3,Ke,3,2,"div",3),e._UZ(4,"br"),e._UZ(5,"br"),e._UZ(6,"hr"),e._UZ(7,"br"),e._UZ(8,"br"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.addNewRevision),e.xp6(1),e.Q6J("ngIf",t.addNewRevision)}}let tt=(()=>{class i{constructor(t,n,o,a){this.auth=t,this.api=n,this.router=o,this.activatedRoute=a,this.newRevisionInfoSub=!1,this.Data=new p.cO,this.addNewRevision=!1,this.isLoading=!1,this.saving_revision=!1}ngOnInit(){}startNewRevision(){this.isLoading=!0,this.api.getRevision(this.api.case.Data.ID,"",this.auth.user.NotationSystem).subscribe(t=>{if(this.isLoading=!1,t.Success){var n=new p.cO;n.parse(t.Result),this.Data=n,console.debug(this.Data),this.addNewRevision=!0}else alert(t.Message)},t=>{this.isLoading=!1,alert("failed to start new revision, due to failure on server side"),console.debug(t)})}noteStep(){this.newRevisionInfoSub=!0,this.newRevisionInfo.valid&&(this.ipr_teeth.Data=this.Data,console.debug(this.Data),this.wizardForm.goToNextStep(),window.scrollTo(0,0))}iprStep(){this.chart_move_teeth.Data=this.Data,this.wizardForm.goToNextStep(),window.scrollTo(0,0)}toothMoveStep(){console.debug(this.api.case.Data),this.saving_revision=!0,this.Data.Revision.CaseID=this.api.case.Data.ID,this.api.addRevision(this.Data).subscribe(t=>{window.scrollTo(0,0),this.saving_revision=!1,t.Success?this.wizardForm.goToNextStep():alert(t.Message)},t=>{this.saving_revision=!1,console.debug(t),alert("Message: "+t.Message)})}stepDone(){this.router.navigate(["admin/home"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.O),e.Y36(D.k),e.Y36(A.F0),e.Y36(A.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-revision"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Fe,5),e.Gf(Oe,5),e.Gf(Ye,5),e.Gf(He,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.wizardForm=o.first),e.iGM(o=e.CRH())&&(n.ipr_teeth=o.first),e.iGM(o=e.CRH())&&(n.chart_move_teeth=o.first),e.iGM(o=e.CRH())&&(n.newRevisionInfo=o.first)}},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-12"],[4,"ngIf"],[1,"d-flex","justify-content-center","mt-2"],["type","button",1,"btn","btn-primary",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["navBarLayout","large-filled",3,"disableNavigationBar",4,"ngIf"],["navBarLayout","large-filled",3,"disableNavigationBar"],["wizardForm",""],["stepTitle","Notes"],["awWizardStepSymbol",""],[3,"ngSubmit"],["newRevisionInfo","ngForm"],[1,"mb-3"],["for","RevionNameID",1,"form-label"],["id","RevionNameID","name","RevisionName","rows","2","required","",1,"form-control",3,"ngModel","ngModelChange"],["RevionNameID","ngModel"],["class","text-danger mt-1",4,"ngIf"],["for","DesignEmbededURLID",1,"form-label"],["id","DesignEmbededURLID","name","DesignEmbededURL","rows","2",1,"form-control",3,"ngModel","ngModelChange"],["for","packageID",1,"form-label"],[1,"col-sm-9","mb-3"],["id","packageID","name","Package","placeholder","Package","bindLabel","Package","bindValue","ID",3,"items","ngModel","searchable","ngModelChange"],["for","additionaNotes",1,"form-label"],["id","designerNotes","name","Notes","rows","2",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"],["stepTitle","IPR Report"],["ipr_teeth",""],["type","button","awPreviousStep","",1,"btn","btn-secondary","me-2"],["stepTitle","Tooth Move Chart"],["chart_move_teeth",""],["stepTitle","Submission Completed"],[1,"text-center"],["data-feather","check-circle","appFeatherIcon","",1,"text-success","mt-4","mb-2","icon-xxl"],[1,"text-muted","mb-3"],[1,"w-75","mx-auto","mb-4","text-muted"],["type","button",1,"btn","btn-success",3,"click"],[1,"mdi","mdi-account-plus",2,"font-size","16pt"],[1,"text-danger","mt-1"],[1,"mdi","mdi-camera-front",2,"font-size","16pt"],[1,"mdi","mdi-clipboard-text",2,"font-size","16pt"],[1,"mdi","mdi-check-circle",2,"font-size","16pt"]],template:function(t,n){1&t&&e.YNc(0,et,9,2,"div",0),2&t&&e.Q6J("ngIf","Digital"==n.api.case.Data.ImpressionType&&("Accepted"==n.api.case.Data.CaseStage||"RequestRetainer"==n.api.case.Data.CaseStage)||"Physical"==n.api.case.Data.ImpressionType&&"ImpressionsReceived"==n.api.case.Data.CaseStage||"RequestNewRevision"==n.api.case.Data.CaseStage||"AmendRevision"==n.api.case.Data.CaseStage||"RequestRefinments"==n.api.case.Data.CaseStage||"RequestMidcourseAdjusment"==n.api.case.Data.CaseStage)},directives:[f.O5,U.Pl,U.GZ,U.O6,l._Y,l.JL,l.F,l.Fj,l.Q7,l.JJ,l.On,S.w9,$.a,U.ei,Le],styles:[""]}),i})();var nt=d(2559),it=d(314),ot=d(7634),st=d(2231);const at=["selectfile"];function rt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ngb-alert",10),e.NdJ("close",function(){return e.CHM(t),e.oxw().alert1closed=!0}),e.TgZ(1,"h4",11),e._uU(2,"Orthodontist Notes:"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("dismissible",!0)("type","warning"),e.xp6(4),e.Oqu(t.api.case.Revisions[0].OrthodontistNotes)}}function lt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ngb-alert",10),e.NdJ("close",function(){return e.CHM(t),e.oxw().alert1closed=!0}),e.TgZ(1,"h4",11),e._uU(2,"Doctor Notes:"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("dismissible",!0)("type","warning"),e.xp6(4),e.Oqu(t.api.case.Revisions[0].DoctorNotes)}}function dt(i,s){if(1&i&&(e.TgZ(0,"ngb-alert",12),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("dismissible",!0)("type","danger"),e.xp6(2),e.Oqu(t.errorMessage)}}function ct(i,s){1&i&&e._UZ(0,"app-new-revision")}function gt(i,s){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"table"),e.TgZ(4,"tr"),e.TgZ(5,"td"),e.TgZ(6,"span",16),e._uU(7,"Patient Name: "),e.qZA(),e.qZA(),e._UZ(8,"td",17),e.TgZ(9,"td"),e.TgZ(10,"span",18),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"tr"),e.TgZ(13,"td"),e.TgZ(14,"span",16),e._uU(15,"Gender: "),e.qZA(),e.qZA(),e._UZ(16,"td",17),e.TgZ(17,"td"),e.TgZ(18,"span",18),e._uU(19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"tr"),e.TgZ(21,"td"),e.TgZ(22,"span",16),e._uU(23,"Date of Birth: "),e.qZA(),e.qZA(),e._UZ(24,"td",17),e.TgZ(25,"td"),e.TgZ(26,"span",18),e._uU(27),e.ALo(28,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"tr"),e.TgZ(30,"td"),e.TgZ(31,"span",16),e._uU(32,"Case No.: "),e.qZA(),e.qZA(),e._UZ(33,"td",17),e.TgZ(34,"td"),e.TgZ(35,"span",18),e._uU(36),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"tr"),e.TgZ(38,"td"),e.TgZ(39,"span",16),e._uU(40,"Case Status: "),e.qZA(),e.qZA(),e._UZ(41,"td",17),e.TgZ(42,"td"),e.TgZ(43,"span",18),e._uU(44),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"tr"),e.TgZ(46,"td"),e.TgZ(47,"span",16),e._uU(48,"Package: "),e.qZA(),e.qZA(),e._UZ(49,"td",17),e.TgZ(50,"td"),e.TgZ(51,"span",18),e._uU(52),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",14),e.TgZ(54,"div",15),e.TgZ(55,"div",18),e.TgZ(56,"span",19),e._uU(57,"Shipping Address: "),e.qZA(),e.qZA(),e._UZ(58,"div",20),e.TgZ(59,"div",18),e.TgZ(60,"p"),e._uU(61),e.qZA(),e.TgZ(62,"p"),e._uU(63),e.qZA(),e.TgZ(64,"p"),e._uU(65),e.qZA(),e.TgZ(66,"p"),e._uU(67),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(68,ct,1,0,"app-new-revision",9),e._UZ(69,"app-case-revisions-list",21),e._UZ(70,"app-case-shipping",22)),2&i){const t=e.oxw();e.xp6(11),e.AsE("",t.api.case.Data.FirstName," ",t.api.case.Data.LastName,""),e.xp6(8),e.Oqu(t.api.case.Data.Gender),e.xp6(8),e.Oqu(e.xi3(28,17,t.api.case.Data.DateOfBirth,"yyyy-MM-dd")),e.xp6(9),e.Oqu(t.api.case.Data.CaseNumber),e.xp6(8),e.Oqu(t.api.case.Data.getCaseStage),e.xp6(8),e.Oqu(t.api.case.PackageName()),e.xp6(9),e.Oqu(t.api.case.Address.ClinicName),e.xp6(2),e.AsE("",t.api.case.Address.Building," ",t.api.case.Address.Street,""),e.xp6(2),e.AsE("",t.api.case.Address.City,"-",t.auth.getCountry(t.api.case.Address.CountryID),""),e.xp6(2),e.Oqu(t.api.case.Address.Phone),e.xp6(1),e.Q6J("ngIf",t.auth.isDesigner()),e.xp6(1),e.Q6J("case",t.api.case)("isOrthodontist",t.auth.isOrthodontist()),e.xp6(1),e.Q6J("case",t.api.case)}}function pt(i,s){if(1&i&&e._UZ(0,"app-case-review-details",23),2&i){const t=e.oxw();e.Q6J("caseData",t.api.case)}}function ut(i,s){if(1&i&&e._UZ(0,"app-case-records",22),2&i){const t=e.oxw();e.Q6J("case",t.api.case.Data)}}function _t(i,s){1&i&&e._UZ(0,"app-chat")}function mt(i,s){if(1&i&&e._UZ(0,"app-case-history",24),2&i){const t=e.oxw();e.Q6J("historyRecords",t.api.case.HistoryRecords)}}function ht(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",26),e.TgZ(2,"div",27),e.TgZ(3,"div",28),e.TgZ(4,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.isUpdatePriceCollapsed=!o.isUpdatePriceCollapsed}),e.TgZ(5,"span",30),e._uU(6," Edit Price "),e.qZA(),e.qZA(),e.TgZ(7,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).caseInvoice()}),e.TgZ(8,"span",30),e._uU(9," Case Invoice "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",32),e.TgZ(11,"div",0),e.TgZ(12,"div",1),e.TgZ(13,"div",26),e.TgZ(14,"div",33),e.TgZ(15,"label",34),e._uU(16,"Edit Price:"),e.qZA(),e.TgZ(17,"input",35),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).api.case.Data.CasePrice=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",26),e.TgZ(19,"div",28),e.TgZ(20,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updatePrice()}),e.TgZ(21,"span",30),e._UZ(22,"span",37),e._uU(23," Save New Price "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.uIk("aria-expanded",!t.isReturnCollapsed),e.xp6(6),e.Q6J("ngbCollapse",t.isUpdatePriceCollapsed),e.xp6(7),e.Q6J("ngModel",t.api.case.Data.CasePrice),e.xp6(3),e.Q6J("disabled",t.savingCase),e.xp6(2),e.Udp("visibility",t.savingCase?"visible":"hidden")}}function Ct(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",26),e.TgZ(2,"div",27),e.TgZ(3,"div",28),e.TgZ(4,"button",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.isReturnCollapsed=!o.isReturnCollapsed,o.api.case.Data.ReturnNotes=""}),e.TgZ(5,"span",30),e._uU(6," Return To Doctor "),e.qZA(),e.qZA(),e.TgZ(7,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).approve_case()}),e.TgZ(8,"span",30),e._UZ(9,"span",37),e._uU(10," Approve Case "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",40),e.TgZ(12,"div",0),e.TgZ(13,"div",1),e.TgZ(14,"div",26),e.TgZ(15,"div",27),e.TgZ(16,"label",41),e._uU(17,"Return Notes:"),e.qZA(),e.TgZ(18,"textarea",42),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).api.case.Data.ReturnNotes=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",26),e.TgZ(20,"div",28),e.TgZ(21,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).return_case()}),e.TgZ(22,"span",30),e._UZ(23,"span",37),e._uU(24," Return To Doctor "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.uIk("aria-expanded",!t.isReturnCollapsed),e.xp6(3),e.Q6J("disabled",t.savingCase),e.xp6(2),e.Udp("visibility",t.savingCase&&t.isApprove?"visible":"hidden"),e.xp6(2),e.Q6J("ngbCollapse",t.isReturnCollapsed),e.xp6(7),e.Q6J("ngModel",t.api.case.Data.ReturnNotes),e.xp6(3),e.Q6J("disabled",t.savingCase),e.xp6(2),e.Udp("visibility",t.savingCase&&t.isReturn?"visible":"hidden")}}function vt(i,s){if(1&i&&(e.TgZ(0,"div",26),e.TgZ(1,"div",27),e._UZ(2,"progress",53),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("value",t.progress.loaded)("max",t.progress.total)}}function ft(i,s){if(1&i&&(e.TgZ(0,"div",26),e.TgZ(1,"div",27),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.fileName," ")}}function Zt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",26),e.TgZ(2,"div",28),e.TgZ(3,"button",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.isImpressionShippingCollapsed=!o.isImpressionShippingCollapsed}),e.TgZ(4,"span",30),e._uU(5," Ready for Impressions Collection "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",26),e.TgZ(7,"div",45),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"div",26),e.TgZ(11,"div",46),e.TgZ(12,"button",47),e.NdJ("click",function(){return e.CHM(t),e.MAs(15).click()}),e._UZ(13,"i",48),e.qZA(),e.TgZ(14,"input",49,50),e.NdJ("change",function(){return e.CHM(t),e.oxw(2).uploadShipmentPolicy()}),e.qZA(),e.qZA(),e.YNc(16,vt,3,2,"div",51),e.YNc(17,ft,3,1,"div",51),e.qZA(),e.TgZ(18,"div",26),e.TgZ(19,"div",28),e.TgZ(20,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addCaseShipment("Impressions")}),e.TgZ(21,"span",30),e._UZ(22,"span",37),e._uU(23," Ready for Impressions Collection "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.uIk("aria-expanded",!t.isImpressionShippingCollapsed),e.xp6(4),e.Q6J("ngbCollapse",t.isImpressionShippingCollapsed),e.xp6(9),e.Q6J("ngIf",t.isUploading),e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(3),e.Q6J("disabled",t.savingCase),e.xp6(2),e.Udp("visibility",t.savingCase?"visible":"hidden")}}function Tt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",26),e.TgZ(2,"div",27),e.TgZ(3,"div",28),e.TgZ(4,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.isImpressionCollapsed=!o.isImpressionCollapsed}),e.TgZ(5,"span",30),e._uU(6," Impressions Received "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",55),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"div",26),e.TgZ(11,"div",28),e.TgZ(12,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).impressions_received()}),e.TgZ(13,"span",30),e._UZ(14,"span",37),e._uU(15," Confirm "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.uIk("aria-expanded",!t.isImpressionCollapsed),e.xp6(3),e.Q6J("ngbCollapse",t.isImpressionCollapsed),e.xp6(5),e.Q6J("disabled",t.savingCase),e.xp6(2),e.Udp("visibility",t.savingCase?"visible":"hidden")}}function bt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",26),e.TgZ(2,"div",27),e.TgZ(3,"div",28),e.TgZ(4,"button",56),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.isManufacturingCollapsed=!o.isManufacturingCollapsed}),e.TgZ(5,"span",30),e._uU(6," Start Manufacturing "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",57),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"div",26),e.TgZ(11,"div",28),e.TgZ(12,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateCaseStatus("noValue","Manufacturing")}),e.TgZ(13,"span",30),e._UZ(14,"span",37),e._uU(15," Confirm "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.uIk("aria-expanded",!t.isManufacturingCollapsed),e.xp6(3),e.Q6J("ngbCollapse",t.isManufacturingCollapsed),e.xp6(5),e.Q6J("disabled",t.savingCase),e.xp6(2),e.Udp("visibility",t.savingCase?"visible":"hidden")}}function xt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",26),e.TgZ(2,"div",27),e.TgZ(3,"div",28),e.TgZ(4,"button",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.isReadyForShippingCollapsed=!o.isReadyForShippingCollapsed}),e.TgZ(5,"span",30),e._uU(6," Ready For Shipping "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",59),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"div",26),e.TgZ(11,"div",28),e.TgZ(12,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).readyForShipping()}),e.TgZ(13,"span",30),e._UZ(14,"span",37),e._uU(15," Confirm "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.uIk("aria-expanded",!t.isReadyForShippingCollapsed),e.xp6(3),e.Q6J("ngbCollapse",t.isReadyForShippingCollapsed),e.xp6(5),e.Q6J("disabled",t.savingCase),e.xp6(2),e.Udp("visibility",t.savingCase?"visible":"hidden")}}function At(i,s){if(1&i&&(e.TgZ(0,"div",26),e.TgZ(1,"div",27),e._UZ(2,"progress",53),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("value",t.progress.loaded)("max",t.progress.total)}}function Mt(i,s){if(1&i&&(e.TgZ(0,"div",26),e.TgZ(1,"div",27),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.fileName," ")}}function qt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",26),e.TgZ(2,"div",28),e.TgZ(3,"button",60),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).shippingCollapsable()}),e.TgZ(4,"span",30),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",26),e.TgZ(7,"div",61),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"div",62),e.TgZ(11,"div",63),e.TgZ(12,"label"),e._uU(13,"Upper Aligners:"),e.qZA(),e.qZA(),e.TgZ(14,"div",64),e.TgZ(15,"label"),e._uU(16,"From"),e.qZA(),e.TgZ(17,"input",65),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).newShipment.UpperFrom=o}),e.qZA(),e.qZA(),e.TgZ(18,"div",64),e.TgZ(19,"label"),e._uU(20,"To"),e.qZA(),e.TgZ(21,"input",66),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).newShipment.UpperTo=o}),e.qZA(),e.qZA(),e.TgZ(22,"div",64),e.TgZ(23,"label"),e._uU(24,"Of"),e.qZA(),e.TgZ(25,"input",67),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).newShipment.UpperOf=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",62),e.TgZ(27,"div",63),e.TgZ(28,"label"),e._uU(29,"Lower Aligners:"),e.qZA(),e.qZA(),e.TgZ(30,"div",64),e.TgZ(31,"label"),e._uU(32,"From"),e.qZA(),e.TgZ(33,"input",68),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).newShipment.LowerFrom=o}),e.qZA(),e.qZA(),e.TgZ(34,"div",64),e.TgZ(35,"label"),e._uU(36,"To"),e.qZA(),e.TgZ(37,"input",69),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).newShipment.LowerTo=o}),e.qZA(),e.qZA(),e.TgZ(38,"div",64),e.TgZ(39,"label"),e._uU(40,"Of"),e.qZA(),e.TgZ(41,"input",70),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).newShipment.LowerOf=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",46),e.TgZ(43,"button",47),e.NdJ("click",function(){return e.CHM(t),e.MAs(46).click()}),e._UZ(44,"i",48),e.qZA(),e.TgZ(45,"input",49,50),e.NdJ("change",function(){return e.CHM(t),e.oxw(2).uploadShipmentPolicy()}),e.qZA(),e.qZA(),e.YNc(47,At,3,2,"div",51),e.YNc(48,Mt,3,1,"div",51),e.TgZ(49,"div",26),e.TgZ(50,"div",28),e.TgZ(51,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addCaseShipment("Treatment")}),e._UZ(52,"span",37),e.TgZ(53,"span",30),e._uU(54),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.uIk("aria-expanded",!t.isTreatmentShippedCollapsed),e.xp6(2),e.hij(" ","ReadyForShipping"==t.api.case.Data.CaseStage?"Aligner Shipped":"RequestNextShipment"==t.api.case.Data.CaseStage?"Next Aligner Shipped":"Replacement Aligner Shipped"," "),e.xp6(2),e.Q6J("ngbCollapse",t.isTreatmentShippedCollapsed),e.xp6(10),e.Q6J("ngModel",t.newShipment.UpperFrom),e.xp6(4),e.Q6J("ngModel",t.newShipment.UpperTo),e.xp6(4),e.Q6J("ngModel",t.newShipment.UpperOf),e.xp6(8),e.Q6J("ngModel",t.newShipment.LowerFrom),e.xp6(4),e.Q6J("ngModel",t.newShipment.LowerTo),e.xp6(4),e.Q6J("ngModel",t.newShipment.LowerOf),e.xp6(6),e.Q6J("ngIf",t.isUploading),e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(3),e.Q6J("disabled",t.savingCase),e.xp6(1),e.Udp("visibility",t.savingCase?"visible":"hidden"),e.xp6(2),e.hij(" ","ReadyForShipping"==t.api.case.Data.CaseStage?"Aligner Shipped":"RequestNextShipment"==t.api.case.Data.CaseStage?"Next Aligner Shipped":"Replacement Aligner Shipped"," ")}}function wt(i,s){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",25),e.TgZ(2,"div",26),e._UZ(3,"hr"),e._UZ(4,"br"),e.qZA(),e.YNc(5,ht,24,6,"div",9),e.YNc(6,Ct,25,9,"div",9),e.YNc(7,Zt,24,7,"div",9),e.YNc(8,Tt,16,5,"div",9),e.YNc(9,bt,16,5,"div",9),e.YNc(10,xt,16,5,"div",9),e.YNc(11,qt,55,15,"div",9),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(6);e.xp6(1),e.Q6J("ngbNavOutlet",n),e.xp6(4),e.Q6J("ngIf",t.auth.isAccountant()&&("Active"==t.api.case.Data.CaseStage||"Manufacturing"==t.api.case.Data.CaseStage||"ReadyForShipping"==t.api.case.Data.CaseStage||"Approved"==t.api.case.Data.CaseStage)),e.xp6(1),e.Q6J("ngIf",t.auth.isDesigner()&&"PendingCaseApproval"==t.api.case.Data.CaseStage),e.xp6(1),e.Q6J("ngIf",t.auth.isLogistics()&&"Accepted"==t.api.case.Data.CaseStage&&"Physical"==t.api.case.Data.ImpressionType),e.xp6(1),e.Q6J("ngIf",t.auth.isLogistics()&&("ImpressionsShipped"==t.api.case.Data.CaseStage||"ReadyForImpressionsCollection"==t.api.case.Data.CaseStage)),e.xp6(1),e.Q6J("ngIf",t.auth.isOperationManager()&&"Approved"==t.api.case.Data.CaseStage),e.xp6(1),e.Q6J("ngIf",t.auth.isOperationManager()&&"Manufacturing"==t.api.case.Data.CaseStage),e.xp6(1),e.Q6J("ngIf",t.auth.isLogistics()&&("ReadyForShipping"==t.api.case.Data.CaseStage||"ReplaceMissing"==t.api.case.Data.CaseStage||"RequestNextShipment"==t.api.case.Data.CaseStage))}}function St(i,s){1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",71),e.TgZ(2,"div",72),e.TgZ(3,"div",73),e._uU(4,"Loading..."),e.qZA(),e.qZA(),e.qZA(),e.qZA())}let Ut=(()=>{class i{constructor(t,n,o,a){this.api=t,this.auth=n,this.activatedRoute=o,this.nav=a,this.isLoading=0,this.savingCase=!1,this.isApprove=!1,this.isReturn=!1,this.errorMessage="",this.isImpressionShippingCollapsed=!0,this.isReturnCollapsed=!0,this.isImpressionCollapsed=!0,this.isReadyForShippingCollapsed=!0,this.isTreatmentShippedCollapsed=!0,this.isOrthodontistCollapsed=!0,this.isUpdatePriceCollapsed=!0,this.isManufacturingCollapsed=!0,this.alert1closed=!1,this.newShipment=new w.ak,this.isUploading=!1,this.isLoaded=!1,this.fileName="",this.progress={loaded:0,total:0},a.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){let t="";this.activatedRoute.params.subscribe(n=>{n.id&&(t=n.id)}),t.length>0&&(console.debug("loading "+t),this.api.getCase(t).subscribe(n=>{n.Success?(this.api.readCase(n,this.auth.user.NotationSystem),console.debug(this.api.case),this.isLoading=1):(this.isLoading=2,this.errorMessage="No data: "+n.Message)},n=>{this.isLoading=2,this.errorMessage="Could not reach the server"}))}updateCaseStatus(t,n){this.savingCase=!0,"isApprove"==t?this.isApprove=!0:"isReturn"==t&&(this.isReturn=!0),console.debug(this.api.case.Data),this.api.casePost(this.api.case.Data.ID,n).subscribe(o=>{this.savingCase=!1,o.Success?(this.api.case.Data.CaseStage=n,"isApprove"==t?this.isApprove=!1:"isReturn"==t&&(this.isReturn=!1),this.nav.navigate(["admin/home"])):(console.debug(o.Message),alert(o.Message))},o=>{this.savingCase=!1,"isApprove"==t?this.isApprove=!1:"isReturn"==t&&(this.isReturn=!1),console.debug(o),alert("Failed: "+o.Message)})}approve_case(){this.updateCaseStatus("isApprove","Accepted")}return_case(){this.updateCaseStatus("isReturn","Returned")}collect_impressions(){this.updateCaseStatus("noValue","ReadyForImpressionsCollection")}impressions_received(){this.updateCaseStatus("noValue","ImpressionsReceived")}readyForShipping(){this.updateCaseStatus("noValue","ReadyForShipping")}shippingCollapsable(){this.api.case.Data.TreatmentShippingPolicy="",this.isTreatmentShippedCollapsed=!this.isTreatmentShippedCollapsed}addCaseShipment(t){this.savingCase=!0,this.newShipment.CaseID=this.api.case.Data.ID,this.newShipment.ShipmnetType=t,console.debug("Saving Treatment newShipment: "+this.newShipment),this.api.addCaseShipment(this.newShipment).subscribe(n=>{n.Success?(this.savingCase=!1,this.nav.navigate(["admin/home"])):(this.savingCase=!1,console.error(n.Message),alert(n.Message))},n=>{this.savingCase=!1,console.debug(n),alert("failed: "+n.message)})}updatePrice(){this.savingCase=!0,console.debug(this.api.case.Data),this.api.saveCase().subscribe(t=>{this.savingCase=!1,t.Success?(this.api.case.Data.load(t.Case),this.nav.navigate(["admin/home"]),window.scrollTo(0,0)):(console.debug(t.Message),alert(t.Message))},t=>{this.savingCase=!1,console.debug(t),alert("Failed: "+t.Message)})}uploadShipmentPolicy(){if(0==this.el.nativeElement.files.length)return;this.isLoaded=!1,this.isUploading=!0;var t=this.el.nativeElement.files[0];this.fileName=t.name;const n=new FormData;n.append("caseID",this.api.case.Data.ID),n.append("userID",this.auth.user.ID),n.append("imageid","ShipmentPolicy"),n.append("file",t,t.name),this.auth.uploadWithId(n).subscribe(o=>{console.debug(o),1==o.type&&o.loaded&&o.total?(console.debug("gaju"),this.progress.loaded=o.loaded,this.progress.total=o.total):o.body&&(this.isUploading=!1,this.isLoaded=!0,this.newShipment.ShipmentPolicy=o.body.FilePath,console.debug("Data Uploaded"),console.debug(o.body))},o=>{this.isUploading=!1,console.debug(o)})}caseInvoice(){this.nav.navigate(["/case/case-invoice",{id:this.api.case.Data.ID}])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.k),e.Y36(q.O),e.Y36(A.gz),e.Y36(A.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-case-review"]],viewQuery:function(t,n){if(1&t&&e.Gf(at,5),2&t){let o;e.iGM(o=e.CRH())&&(n.el=o.first)}},decls:29,vars:10,consts:[[1,"card"],[1,"card-body"],[3,"dismissible","type","close",4,"ngIf"],[3,"dismissible","type",4,"ngIf"],["ngbNav","",1,"nav-tabs","mt-3"],["defaultNav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[4,"ngIf"],[3,"dismissible","type","close"],[1,"alert-heading"],[3,"dismissible","type"],[1,"row",2,"padding","10px"],[1,"col-sm-4"],[1,"mb-3",2,"display","flex"],[1,"mb-3","text-muted"],[2,"width","20px"],[1,"mb-3"],[1,"text-muted"],[2,"width","10px"],[3,"case","isOrthodontist"],[3,"case"],[3,"caseData"],[3,"historyRecords"],[1,"mt-3",3,"ngbNavOutlet"],[1,"row"],[1,"col-sm-12"],[1,"d-flex","justify-content-center","mt-2"],["type","button","aria-controls","updatePrice",1,"btn","btn-outline-primary","me-2",3,"click"],[2,"white-space","nowrap"],["type","button",1,"btn","btn-outline-primary","me-2",3,"click"],["id","updatePrice",3,"ngbCollapse"],[1,"col-sm-3"],["for","casePrice",1,"form-label"],["id","casePrice","name","casePrice",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-primary","me-2",3,"disabled","click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button","aria-controls","returnCase",1,"btn","btn-danger","me-2",3,"click"],["type","button",1,"btn","btn-primary","me-2",3,"disabled","click"],["id","returnCase",3,"ngbCollapse"],["for","returnNotes",1,"form-label"],["id","returnNotes","rows","2",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-danger","me-2",3,"disabled","click"],["type","button","aria-controls","impressionShipping",1,"btn","btn-primary",3,"click"],["id","impressionShipping",3,"ngbCollapse"],[1,"d-none","d-md-block"],["type","button","ngbTooltip","Attatch shipping policy",1,"btn","border","btn-icon","rounded-circle","me-2",3,"click"],[1,"feather","icon-paperclip","text-muted"],["type","file","name","file",2,"display","none",3,"change"],["selectfile",""],["class","row",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value","max"],["type","button","aria-controls","impressionsReceived",1,"btn","btn-primary","me-2",3,"click"],["id","impressionsReceived",3,"ngbCollapse"],["type","button","aria-controls","startManufacturing",1,"btn","btn-primary","me-2",3,"click"],["id","startManufacturing",3,"ngbCollapse"],["type","button","aria-controls","readyForShipping",1,"btn","btn-primary","me-2",3,"click"],["id","readyForShipping",3,"ngbCollapse"],["type","button","aria-controls","treatmentShipping",1,"btn","btn-primary",3,"click"],["id","treatmentShipping",3,"ngbCollapse"],[1,"row","mb-3"],[1,"col-sm-2"],[1,"col-sm-1"],["type","number","id","upperFrom","name","upperFrom","placeholder","Upper From",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","upperTo","name","upperTo","placeholder","Upper To",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","upperOf","name","upperOf","placeholder","Upper Of",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","lowerFrom","name","lowerFrom","placeholder","Lower From",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","lowerTo","name","lowerTo","placeholder","Lower To",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","lowerOf","name","lowerOf","placeholder","Lower Of",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"spinner-wrapper"],[1,"spinner"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,rt,5,3,"ngb-alert",2),e.YNc(3,lt,5,3,"ngb-alert",2),e.YNc(4,dt,3,3,"ngb-alert",3),e.TgZ(5,"ul",4,5),e.TgZ(7,"li",6),e.TgZ(8,"a",7),e._uU(9,"Digital Setups"),e.qZA(),e.YNc(10,gt,71,20,"ng-template",8),e.qZA(),e.TgZ(11,"li",6),e.TgZ(12,"a",7),e._uU(13,"Details"),e.qZA(),e.YNc(14,pt,1,1,"ng-template",8),e.qZA(),e.TgZ(15,"li",6),e.TgZ(16,"a",7),e._uU(17,"Records"),e.qZA(),e.YNc(18,ut,1,1,"ng-template",8),e.qZA(),e.TgZ(19,"li",6),e.TgZ(20,"a",7),e._uU(21,"Chat"),e.qZA(),e.YNc(22,_t,1,0,"ng-template",8),e.qZA(),e.TgZ(23,"li",6),e.TgZ(24,"a",7),e._uU(25,"History"),e.qZA(),e.YNc(26,mt,1,1,"ng-template",8),e.qZA(),e.qZA(),e.YNc(27,wt,12,8,"div",9),e.YNc(28,St,5,0,"div",9),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",!n.alert1closed&&"AmendRevision"==n.api.case.Data.CaseStage),e.xp6(1),e.Q6J("ngIf",!n.alert1closed&&"RequestNewRevision"==n.api.case.Data.CaseStage),e.xp6(1),e.Q6J("ngIf",n.errorMessage.length>0),e.xp6(3),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavItem",3),e.xp6(4),e.Q6J("ngbNavItem",4),e.xp6(4),e.Q6J("ngbNavItem",5),e.xp6(4),e.Q6J("ngIf",1==n.isLoading),e.xp6(1),e.Q6J("ngIf",0==n.isLoading))},directives:[f.O5,Z.Pz,Z.nv,Z.Vx,Z.uN,Z.xm,V.K,z.A,tt,nt.G,it.t,ot.P,st.k,Z.tO,Z._D,l.Fj,l.JJ,l.On,Z._L,l.wV],pipes:[f.uU],styles:[""]}),i})();const yt=["lgModal"];function Nt(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"First name is required"),e.qZA())}function It(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"Last name is required"),e.qZA())}function Rt(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"Valid Email is required"),e.qZA())}function Jt(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"Password is required "),e.qZA())}function Dt(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"Status is required"),e.qZA())}function Qt(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"User role is required"),e.qZA())}function kt(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"Country is required"),e.qZA())}function Et(i,s){if(1&i&&(e.TgZ(0,"div",7),e._UZ(1,"label",35),e.TgZ(2,"div",36),e.TgZ(3,"p",34),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(t.errorMessage)}}function Pt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"form",1,2),e.NdJ("ngSubmit",function(){const a=e.CHM(t).$implicit,r=e.MAs(1);return e.oxw().save_User(a,r)}),e.TgZ(2,"div",3),e.TgZ(3,"h5",4),e._uU(4,"User Form"),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return e.CHM(t).$implicit.close("by: close icon")}),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"label",8),e._uU(9,"First Name:"),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"input",10,11),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.User.Name=o}),e.qZA(),e.YNc(13,Nt,2,0,"p",12),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"label",8),e._uU(16,"Last Name:"),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"input",13,14),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.User.LastName=o}),e.qZA(),e.YNc(20,It,2,0,"p",12),e.qZA(),e.qZA(),e.TgZ(21,"div",7),e.TgZ(22,"label",8),e._uU(23,"Email:"),e.qZA(),e.TgZ(24,"div",9),e.TgZ(25,"input",15,16),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.User.Email=o}),e.qZA(),e.YNc(27,Rt,2,0,"p",12),e.qZA(),e.qZA(),e.TgZ(28,"div",7),e.TgZ(29,"label",8),e._uU(30,"Password:"),e.qZA(),e.TgZ(31,"div",9),e.TgZ(32,"input",17,18),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.User.Password=o}),e.qZA(),e.YNc(34,Jt,2,0,"p",12),e.qZA(),e.qZA(),e.TgZ(35,"div",7),e.TgZ(36,"label",8),e._uU(37,"Active Status:"),e.qZA(),e.TgZ(38,"div",9),e.TgZ(39,"ng-select",19,20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.User.IsActive=o}),e.qZA(),e.YNc(41,Dt,2,0,"p",12),e.qZA(),e.qZA(),e.TgZ(42,"div",7),e.TgZ(43,"label",21),e._uU(44,"Role:"),e.qZA(),e.TgZ(45,"div",9),e.TgZ(46,"ng-select",22,23),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.User.PermissionGroupID=o}),e.qZA(),e.YNc(48,Qt,2,0,"p",12),e.qZA(),e.qZA(),e.TgZ(49,"div",7),e.TgZ(50,"label",24),e._uU(51,"Country:"),e.qZA(),e.TgZ(52,"div",9),e.TgZ(53,"ng-select",25,26),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.User.CountryID=o}),e.qZA(),e.YNc(55,kt,2,0,"p",12),e.qZA(),e.qZA(),e.YNc(56,Et,5,1,"div",27),e.qZA(),e.TgZ(57,"div",28),e.TgZ(58,"button",29),e.NdJ("click",function(){return e.CHM(t).$implicit.close("by: close button")}),e._uU(59,"Close"),e.qZA(),e.TgZ(60,"button",30),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().removeUser(a)}),e.TgZ(61,"span",31),e._UZ(62,"span",32),e._uU(63," Delete User "),e.qZA(),e.qZA(),e.TgZ(64,"button",33),e.TgZ(65,"span",31),e._UZ(66,"span",32),e._uU(67," Save "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(12),n=e.MAs(19),o=e.MAs(26),a=e.MAs(33),r=e.MAs(40),u=e.MAs(47),h=e.MAs(54),c=e.oxw();e.xp6(11),e.Q6J("ngModel",c.Current.User.Name),e.xp6(2),e.Q6J("ngIf",t.invalid&&c.formSubmited),e.xp6(5),e.Q6J("ngModel",c.Current.User.LastName),e.xp6(2),e.Q6J("ngIf",n.invalid&&c.formSubmited),e.xp6(5),e.Q6J("ngModel",c.Current.User.Email),e.xp6(2),e.Q6J("ngIf",o.invalid&&c.formSubmited),e.xp6(5),e.Q6J("ngModel",c.Current.User.Password),e.xp6(2),e.Q6J("ngIf",(!a.value||a.value.length<6)&&c.IsNew&&c.formSubmited),e.xp6(5),e.Q6J("items",c.activeStatuses)("ngModel",c.Current.User.IsActive)("searchable",!1),e.xp6(2),e.Q6J("ngIf",r.invalid&&c.formSubmited),e.xp6(5),e.Q6J("items",c.currentRoles)("ngModel",c.Current.User.PermissionGroupID)("searchable",!1),e.xp6(2),e.Q6J("ngIf",u.invalid&&c.formSubmited),e.xp6(5),e.Q6J("items",c.countries)("ngModel",c.Current.User.CountryID)("searchable",!1),e.xp6(2),e.Q6J("ngIf",h.invalid&&c.formSubmited),e.xp6(1),e.Q6J("ngIf",c.errorMessage),e.xp6(4),e.Q6J("disabled",c.savingUser||c.removingUser),e.xp6(2),e.Udp("visibility",c.removingUser?"visible":"hidden"),e.xp6(2),e.Q6J("disabled",c.savingUser||c.removingUser),e.xp6(2),e.Udp("visibility",c.savingUser?"visible":"hidden")}}let Lt=(()=>{class i{constructor(t,n,o){this.adminApi=t,this.api=n,this.modalService=o,this.activeStatuses=[{value:!0,name:"Active"},{value:!1,name:"In Active"}],this.currentRoles=[],this.formSubmited=!1,this.IsNew=!1,this.errorMessage="",this.countries=[],this.savingUser=!1,this.removingUser=!1,this.Current=new p.fv,this.UserChanged=new e.vpe}ngOnInit(){this.countries=this.api.countries}showDlg(){this.errorMessage="",this.formSubmited=!1,this.currentRoles=this.adminApi.UserGroups,this.savingUser=!1,this.removingUser=!1,console.debug(this.Current),this.modalService.open(this.lgModal,{size:"lg",centered:!0}).result.then(t=>{}).catch(t=>{})}save_User(t,n){this.IsNew?this.add_User(t,n):this.edit_User(t,n)}edit_User(t,n){this.formSubmited=!0,n.valid?(this.savingUser=!0,this.adminApi.editUser(this.Current.User).subscribe(o=>{this.savingUser=!1,o.Success?(this.UserChanged.emit(),t.close(),this.Current=new p.fv):(this.savingUser=!1,this.errorMessage=o.Message)},o=>{console.debug(o),this.savingUser=!1,this.errorMessage="failed: "+o.message})):console.debug(n.errors)}add_User(t,n){this.formSubmited=!0,n.valid?(this.savingUser=!0,this.adminApi.addUser(this.Current.User).subscribe(o=>{this.savingUser=!1,o.Success?(this.UserChanged.emit(),t.close(),this.Current=new p.fv):(this.savingUser=!1,this.errorMessage=o.Message)},o=>{console.debug(o),this.savingUser=!1,this.errorMessage="failed: "+o.message})):console.debug(n.errors)}removeUser(t){this.removingUser=!0,this.adminApi.deleteUser(this.Current.User).subscribe(n=>{this.removingUser=!1,n.Success?(this.UserChanged.emit(),t.close(),this.Current=new p.fv):(this.removingUser=!1,this.errorMessage=n.Message)},n=>{console.debug(n),this.removingUser=!1,this.errorMessage="failed: "+n.message})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(q.O),e.Y36(Z.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(yt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.lgModal=o.first)}},inputs:{Current:"Current"},outputs:{UserChanged:"UserChanged"},decls:2,vars:0,consts:[["lgModal",""],[3,"ngSubmit"],["userForm","ngForm"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],["for","activeStatus",1,"col-sm-3"],[1,"col-sm-5","mb-3"],["type","text","name","FirstName","placeholder","First Name","minlength","3","required","",1,"form-control",3,"ngModel","ngModelChange"],["FirstName","ngModel"],["class","text-danger mt-1",4,"ngIf"],["type","text","name","LastName","placeholder","Last Name","minlength","3","required","",1,"form-control",3,"ngModel","ngModelChange"],["LastName","ngModel"],["type","email","name","UserEmail","placeholder","Email","email","","required","",1,"form-control",3,"ngModel","ngModelChange"],["UserEmail","ngModel"],["type","password","name","UserPassword","placeholder","Password",1,"form-control",3,"ngModel","ngModelChange"],["UserPassword","ngModel"],["id","activeStatus","name","activeStatus","placeholder","activeStatus","bindLabel","name","bindValue","value","required","",3,"items","ngModel","searchable","ngModelChange"],["activeStatus","ngModel"],["for","PermissionGroupID",1,"col-sm-3"],["id","PermissionGroupID","name","PermissionGroupID","placeholder","Role","bindLabel","Name","bindValue","ID","required","",3,"items","ngModel","searchable","ngModelChange"],["permissionGroup","ngModel"],["for","searchCountryID",1,"col-sm-3"],["id","searchCountryID","name","CountryID","placeholder","Country","bindLabel","Country","bindValue","ID",3,"items","ngModel","searchable","ngModelChange"],["countryID","ngModel"],["class","row",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[2,"white-space","nowrap"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger","mt-1"],[1,"col-sm-4","text-muted"],[1,"col-sm-7","mb-3"]],template:function(t,n){1&t&&e.YNc(0,Pt,68,27,"ng-template",null,0,e.W1O)},directives:[l._Y,l.JL,l.F,l.Fj,l.wO,l.Q7,l.JJ,l.On,f.O5,l.on,S.w9],styles:[""]}),i})();const Ft=["userCtr"];function Ot(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().editItem(a)}),e._UZ(1,"i",34),e._uU(2," Edit "),e.qZA()}}function Yt(i,s){1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",35),e.TgZ(2,"div",36),e.TgZ(3,"span",37),e._uU(4,"Loading..."),e.qZA(),e.qZA(),e.qZA(),e.qZA())}let Ht=(()=>{class i{constructor(t,n,o){this.api=t,this.auth=n,this.nav=o,this.loadingIndicator=!1,this.TotalCount=0,this.pageNumber=0,this.ColumnMode=_.hq,this.SelectionType=_.RT,this.usersList=[],this.SearchModel=new p.uE,this.countries=[],this.states=[],this.currentRoles=[],this.selected=[],this.Current=new p.fv,o.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){let t=[];this.auth.countries.forEach(function(n){t.push(n)}),this.countries=t,this.currentRoles=this.api.UserGroups,this.SearchModel.InitRequest=!0,this.doSearchUsers()}doSearch(){this.TotalCount=0,this.pageNumber=0,this.SearchModel.Page=0,this.SearchModel.InitRequest=!1,this.doSearchUsers()}doSearchUsers(){this.loadingIndicator=!0,this.usersList=[],this.SearchModel.Page=this.pageNumber,null==this.SearchModel.CountryID&&(this.SearchModel.CountryID=""),null==this.SearchModel.States&&(this.SearchModel.States=""),this.SearchModel.OnlyUsers=!0,this.api.getUsers(this.SearchModel).subscribe(t=>{this.loadingIndicator=!1,t&&t.Users.length>0&&(this.usersList=t.Users,this.TotalCount=t.TotalCount),this.SearchModel.InitRequest&&this.api.UserGroups.length>0&&(this.currentRoles=this.api.UserGroups)},t=>{this.loadingIndicator=!1,console.debug(t),t.message?alert(t.message):alert("Failed")})}onSort(t){console.debug(t),t&&t.sorts&&t.sorts.length>0&&(this.SearchModel.SortDir=t.sorts[0].dir,this.SearchModel.SortProp=t.sorts[0].prop,this.doSearchUsers())}setPage(t){console.debug(t),this.pageNumber=t.offset,this.doSearchUsers()}onUserChanged(t){this.doSearch()}editItem(t){this.userCtr.IsNew=!1,t.User.Password="",this.Current=t,this.userCtr.showDlg()}addUser(){this.userCtr.IsNew=!0,this.Current=new p.fv,this.Current.User.Password="",this.userCtr.showDlg()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(q.O),e.Y36(A.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-users"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ft,5),2&t){let o;e.iGM(o=e.CRH())&&(n.userCtr=o.first)}},decls:41,vars:19,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row",3,"ngSubmit"],["searchForm",""],[1,"col-sm-4"],["for","exampleInputUsername1",1,"form-label"],["id","searchCountryID","name","CountryID","placeholder","Country","bindLabel","Country","bindValue","ID",3,"items","ngModel","searchable","change","ngModelChange"],["searchCountryID","ngModel"],["id","PermissionGroupID","name","PermissionGroup","placeholder","Role","bindLabel","Name","bindValue","ID",3,"items","ngModel","searchable","change","ngModelChange"],["permissionGroupID","ngModel"],["for","exampleInputEmail1",1,"form-label"],[1,"input-group"],["type","text","id","searchTextID","placeholder","Search","name","searchText",1,"form-control",3,"ngModel","ngModelChange"],["searchTextID","ngModel"],["type","submit",1,"input-group-text","btn-link","custom_btn_icon"],[1,"feather","icon-search"],["type","button",1,"input-group-text","btn-link","custom_btn_icon",3,"click"],[1,"feather","icon-plus"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","scrollbarH","footerHeight","limit","externalPaging","externalSorting","count","offset","page","sort"],["name","Full Name","prop","FullName"],["name","Email","prop","Email"],["name","Country","prop","Country"],["name","Role","prop","RoleName"],["name","Status","prop","ActiveStatus"],["name","Edit"],["ngx-datatable-cell-template",""],[4,"ngIf"],[3,"Current","UserChanged"],["userCtr",""],[1,"btn","btn-outline-primary",3,"click"],[1,"feather","icon-edit"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h6",4),e._uU(5,"Users List"),e.qZA(),e.TgZ(6,"form",5,6),e.NdJ("ngSubmit",function(){return n.doSearch()}),e.TgZ(8,"div",7),e.TgZ(9,"label",8),e._uU(10,"Country"),e.qZA(),e.TgZ(11,"ng-select",9,10),e.NdJ("change",function(){return n.doSearch()})("ngModelChange",function(a){return n.SearchModel.CountryID=a}),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"label",8),e._uU(15,"Roles"),e.qZA(),e.TgZ(16,"ng-select",11,12),e.NdJ("change",function(){return n.doSearch()})("ngModelChange",function(a){return n.SearchModel.RoleID=a}),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"label",13),e._uU(20,"Searching"),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"input",15,16),e.NdJ("ngModelChange",function(a){return n.SearchModel.SearchText=a}),e.qZA(),e.TgZ(24,"button",17),e._UZ(25,"i",18),e.qZA(),e.TgZ(26,"button",19),e.NdJ("click",function(){return n.addUser()}),e._UZ(27,"i",20),e._uU(28," Add User "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",21),e.TgZ(30,"ngx-datatable",22),e.NdJ("page",function(a){return n.setPage(a)})("sort",function(a){return n.onSort(a)}),e._UZ(31,"ngx-datatable-column",23),e._UZ(32,"ngx-datatable-column",24),e._UZ(33,"ngx-datatable-column",25),e._UZ(34,"ngx-datatable-column",26),e._UZ(35,"ngx-datatable-column",27),e.TgZ(36,"ngx-datatable-column",28),e.YNc(37,Ot,3,0,"ng-template",29),e.qZA(),e.qZA(),e.qZA(),e.YNc(38,Yt,5,0,"div",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"app-user-modal",31,32),e.NdJ("UserChanged",function(a){return n.onUserChanged(a)}),e.qZA()),2&t&&(e.xp6(11),e.Q6J("items",n.countries)("ngModel",n.SearchModel.CountryID)("searchable",!1),e.xp6(5),e.Q6J("items",n.currentRoles)("ngModel",n.SearchModel.RoleID)("searchable",!1),e.xp6(6),e.Q6J("ngModel",n.SearchModel.SearchText),e.xp6(8),e.Q6J("rows",n.usersList)("loadingIndicator",n.loadingIndicator)("columnMode",n.ColumnMode.force)("scrollbarH",!0)("footerHeight",50)("limit",10)("externalPaging",!0)("externalSorting",!0)("count",n.TotalCount)("offset",n.pageNumber),e.xp6(8),e.Q6J("ngIf",n.loadingIndicator),e.xp6(1),e.Q6J("Current",n.Current))},directives:[l._Y,l.JL,l.F,S.w9,l.JJ,l.On,l.Fj,_.nE,_.UC,_.vq,f.O5,Lt],styles:[""]}),i})();const Vt=["lgModal"];function zt(i,s){1&i&&(e.TgZ(0,"p",21),e._uU(1,"Package is required"),e.qZA())}function $t(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().add_Package(o)}),e.TgZ(1,"span",23),e._UZ(2,"span",24),e._uU(3," Add "),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.savingPackage),e.xp6(2),e.Udp("visibility",t.savingPackage?"visible":"hidden")}}function Gt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().delete_Package(o)}),e.TgZ(1,"span",23),e._UZ(2,"span",24),e._uU(3," Delete "),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.savingPackage),e.xp6(2),e.Udp("visibility",t.savingPackage&&t.isDelete?"visible":"hidden")}}function jt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().edit_Package(o)}),e.TgZ(1,"span",23),e._UZ(2,"span",24),e._uU(3," Save "),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.savingPackage),e.xp6(2),e.Udp("visibility",t.savingPackage&&!t.isDelete?"visible":"hidden")}}function Bt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e._uU(2,"Price Package"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t).$implicit.close("by: close icon")}),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"label",6),e._uU(7,"Country"),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"ng-select",8),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.CountryID=o}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12,"Package"),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"ng-select",11,12),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.Package=o}),e.qZA(),e.YNc(16,zt,2,0,"p",13),e.qZA(),e.qZA(),e.TgZ(17,"div",9),e.TgZ(18,"label",14),e._uU(19,"Price"),e.qZA(),e.TgZ(20,"div",15),e.TgZ(21,"input",16),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Current.PackagePrice=o}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",17),e.TgZ(23,"button",18),e.NdJ("click",function(){return e.CHM(t).$implicit.close("by: close button")}),e._uU(24,"Close"),e.qZA(),e.YNc(25,$t,4,3,"button",19),e.YNc(26,Gt,4,3,"button",20),e.YNc(27,jt,4,3,"button",19),e.qZA()}if(2&i){const t=e.MAs(15),n=e.oxw();e.xp6(9),e.Q6J("items",n.countries)("ngModel",n.Current.CountryID)("searchable",!1),e.xp6(5),e.Q6J("items",n.packageTypes)("ngModel",n.Current.Package)("searchable",!1),e.xp6(2),e.Q6J("ngIf",t.invalid),e.xp6(5),e.Q6J("ngModel",n.Current.PackagePrice),e.xp6(4),e.Q6J("ngIf",n.IsNew),e.xp6(1),e.Q6J("ngIf",!n.IsNew),e.xp6(1),e.Q6J("ngIf",!n.IsNew)}}let Wt=(()=>{class i{constructor(t,n,o){this.auth=t,this.adminApi=n,this.modalService=o,this.packageTypes=[{value:"ExpressSingle",name:"Express Single Arch"},{value:"ExpressDual",name:"Express Dual Arch"},{value:"LiteSingle",name:"Lite Single Arch"},{value:"LiteDual",name:"Lite Dual Arch"},{value:"Unlimited",name:"Unlimited"}],this.Current=new w.IA,this.countries=[],this.IsNew=!1,this.PackageChanged=new e.vpe,this.savingPackage=!1,this.isDelete=!1}ngOnInit(){let t=[];this.auth.countries.forEach(function(n){t.push(n)}),this.countries=t}showDlg(){this.modalService.open(this.lgModal,{size:"lg",centered:!0}).result.then(t=>{}).catch(t=>{})}add_Package(t){this.savingPackage=!0,this.adminApi.addPackage(this.Current).subscribe(n=>{this.savingPackage=!1,n.Success?(this.PackageChanged.emit(),t.close(),this.Current=new w.IA):(this.savingPackage=!1,alert(n.Message))},n=>{console.debug(n),this.savingPackage=!1,alert("failed: "+n.message)})}edit_Package(t){this.savingPackage=!0,this.adminApi.editPackage(this.Current).subscribe(n=>{this.savingPackage=!1,n.Success?(this.PackageChanged.emit(),t.close(),this.Current=new w.IA):(this.savingPackage=!1,alert(n.Message))},n=>{console.debug(n),this.savingPackage=!1,alert("failed: "+n.message)})}delete_Package(t){this.savingPackage=!0,this.isDelete=!0,this.adminApi.removePackage(this.Current).subscribe(n=>{this.savingPackage=!1,this.isDelete=!1,n.Success?(this.PackageChanged.emit(),t.close(),this.Current=new w.IA):alert(n.Message)},n=>{console.debug(n),this.isDelete=!1,this.savingPackage=!1,alert("failed: "+n.message)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.O),e.Y36(M.o),e.Y36(Z.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-package-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Vt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.lgModal=o.first)}},inputs:{Current:"Current",IsNew:"IsNew"},outputs:{PackageChanged:"PackageChanged"},decls:2,vars:0,consts:[["lgModal",""],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],["for","dlg_country_id",1,"col-sm-2"],[1,"col-sm-4","mb-3"],["id","dlg_country_id","name","Country","placeholder","Country","bindLabel","Country","bindValue","ID",3,"items","ngModel","searchable","ngModelChange"],[1,"row","mb-3"],["for","package_id",1,"col-sm-2"],["id","packageType","name","package","placeholder","Package","bindLabel","name","bindValue","value","required","",3,"items","ngModel","searchable","ngModelChange"],["packageType","ngModel"],["class","text-danger mt-1",4,"ngIf"],["for","price_id",1,"col-sm-2","col-form-label"],[1,"col-sm-6"],["type","number","id","price_id","name","Price","placeholder","Price",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"text-danger","mt-1"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[2,"white-space","nowrap"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-danger",3,"disabled","click"]],template:function(t,n){1&t&&e.YNc(0,Bt,28,11,"ng-template",null,0,e.W1O)},directives:[S.w9,l.JJ,l.On,l.Q7,f.O5,l.wV,l.Fj],styles:[""]}),i})();const Xt=["packageCtr"];function Kt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().editPackage(a)}),e._UZ(1,"i",22),e._uU(2," Edit "),e.qZA()}}let en=(()=>{class i{constructor(t,n){this.api=t,this.auth=n,this.loadingIndicator=!1,this.packageList=[],this.SearchModel=new p.uE,this.countries=[],this.ColumnMode=_.hq,this.SelectionType=_.RT,this.isNew=!1,this.Current=new w.IA}ngOnInit(){let t=[];t.push(this.getEmptyCountry()),this.auth.countries.forEach(function(n){t.push(n)}),this.countries=t,this.doSearchPackages()}getEmptyCountry(){let t=new w.b3;return t.ID="00000000-0000-0000-0000-000000000000",t.Country="All",t}doSearch(){this.SearchModel.Page=0,this.doSearchPackages()}doSearchPackages(){this.loadingIndicator=!0,this.packageList=[],null==this.SearchModel.CountryID&&(this.SearchModel.CountryID=this.getEmptyCountry().ID),this.api.getPackages(this.SearchModel).subscribe(t=>{console.debug("result: "+t),this.loadingIndicator=!1,t&&t.length>0&&(this.packageList=t,console.debug(" this.packageList: "+this.packageList))},t=>{this.loadingIndicator=!1,console.debug(t),t.message?alert(t.message):alert("Failed")})}editPackage(t){this.isNew=!1,this.Current=t.package,this.packageCtr.showDlg()}newPackage(){this.isNew=!0,this.Current=new w.IA,this.packageCtr.showDlg()}onPackageChanged(t){this.doSearch()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(q.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-packages"]],viewQuery:function(t,n){if(1&t&&e.Gf(Xt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.packageCtr=o.first)}},decls:27,vars:11,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-sm-4"],["for","searchCountryID",1,"form-label"],["id","searchCountryID","name","CountryID","placeholder","Country","bindLabel","Country","bindValue","ID",3,"items","ngModel","searchable","change","ngModelChange"],["searchCountryID","ngModel"],[1,"mb-3"],["for","newPackage",1,"form-label"],["type","button","id","newPackage",1,"btn","btn-primary",3,"click"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","scrollbarH","footerHeight","limit"],["name","Country","prop","Country"],["name","Package","prop","Package"],["name","Package Price","prop","PackagePrice"],["name","Edit Package"],["ngx-datatable-cell-template",""],[3,"IsNew","Current","PackageChanged"],["packageCtr",""],[1,"btn","btn-outline-primary",3,"click"],[1,"feather","icon-edit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h6",4),e._uU(5,"Price Packages List"),e.qZA(),e.TgZ(6,"div",0),e.TgZ(7,"div",5),e.TgZ(8,"label",6),e._uU(9,"Country"),e.qZA(),e.TgZ(10,"ng-select",7,8),e.NdJ("change",function(){return n.doSearch()})("ngModelChange",function(a){return n.SearchModel.CountryID=a}),e.qZA(),e.qZA(),e._UZ(12,"div",5),e.TgZ(13,"div",5),e.TgZ(14,"div",9),e._UZ(15,"label",10),e.TgZ(16,"button",11),e.NdJ("click",function(){return n.newPackage()}),e._uU(17," New Package "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"ngx-datatable",13),e._UZ(20,"ngx-datatable-column",14),e._UZ(21,"ngx-datatable-column",15),e._UZ(22,"ngx-datatable-column",16),e.TgZ(23,"ngx-datatable-column",17),e.YNc(24,Kt,3,0,"ng-template",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"app-package-modal",19,20),e.NdJ("PackageChanged",function(a){return n.onPackageChanged(a)}),e.qZA()),2&t&&(e.xp6(10),e.Q6J("items",n.countries)("ngModel",n.SearchModel.CountryID)("searchable",!1),e.xp6(9),e.Q6J("rows",n.packageList)("loadingIndicator",n.loadingIndicator)("columnMode",n.ColumnMode.force)("scrollbarH",!0)("footerHeight",50)("limit",10),e.xp6(6),e.Q6J("IsNew",n.isNew)("Current",n.Current))},directives:[S.w9,l.JJ,l.On,_.nE,_.UC,_.vq,Wt],styles:[""]}),i})();var Q=d(2313),tn=d(9770),nn=d(727),N=d(4968),on=d(7579),sn=d(6063);class an extends on.x{constructor(s=1/0,t=1/0,n=sn.l){super(),this._bufferSize=s,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,s),this._windowTime=Math.max(1,t)}next(s){const{isStopped:t,_buffer:n,_infiniteTimeWindow:o,_timestampProvider:a,_windowTime:r}=this;t||(n.push(s),!o&&n.push(a.now()+r)),this._trimBuffer(),super.next(s)}_subscribe(s){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(s),{_infiniteTimeWindow:n,_buffer:o}=this,a=o.slice();for(let r=0;r<a.length&&!s.closed;r+=n?1:2)s.next(a[r]);return this._checkFinalizedStatuses(s),t}_trimBuffer(){const{_bufferSize:s,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:o}=this,a=(o?1:2)*s;if(s<1/0&&a<n.length&&n.splice(0,n.length-a),!o){const r=t.now();let u=0;for(let h=1;h<n.length&&n[h]<=r;h+=2)u=h;u&&n.splice(0,u+1)}}}var rn=d(3099),k=d(8372),dn=d(655);const cn=[[["","quill-editor-toolbar",""]]],gn=["[quill-editor-toolbar]"],I={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},y=(i,s)=>i||s||"html",E=new e.OlP("config",{providedIn:"root",factory:()=>({modules:I})});let P=(()=>{class i{constructor(t,n){this.config=n,this.quill$=(0,tn.P)(()=>(0,dn.mG)(this,void 0,void 0,function*(){var o,a;const r=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;const u=yield d.e(915).then(d.t.bind(d,9971,19));return this.document.addEventListener=r,this.Quill=u.default?u.default:u,null===(o=this.config.customOptions)||void 0===o||o.forEach(h=>{const c=this.Quill.import(h.import);c.whitelist=h.whitelist,this.Quill.register(c,!0,this.config.suppressGlobalRegisterWarning)}),null===(a=this.config.customModules)||void 0===a||a.forEach(({implementation:h,path:c})=>{this.Quill.register(c,h,this.config.suppressGlobalRegisterWarning)}),this.Quill})).pipe(function(i,s,t){var n,o;let a,r=!1;return i&&"object"==typeof i?(a=null!==(n=i.bufferSize)&&void 0!==n?n:1/0,s=null!==(o=i.windowTime)&&void 0!==o?o:1/0,r=!!i.refCount,t=i.scheduler):a=null!=i?i:1/0,(0,rn.B)({connector:()=>new an(a,s,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}({bufferSize:1,refCount:!0})),this.document=t.get(f.K0),this.config||(this.config={modules:I})}getQuill(){return this.quill$}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.zs3),e.LFG(E,8))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),pn=(()=>{class i{constructor(t,n,o,a,r,u,h,c){this.elementRef=n,this.cd=o,this.domSanitizer=a,this.platformId=r,this.renderer=u,this.zone=h,this.service=c,this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new e.vpe,this.onEditorChanged=new e.vpe,this.onContentChanged=new e.vpe,this.onSelectionChanged=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.disabled=!1,this.subscription=null,this.quillSubscription=null,this.valueGetter=(v,C)=>{let g=C.querySelector(".ql-editor").innerHTML;("<p><br></p>"===g||"<div><br></div>"===g)&&(g=this.defaultEmptyValue);let m=g;const b=y(this.format,this.service.config.format);if("text"===b)m=v.getText();else if("object"===b)m=v.getContents();else if("json"===b)try{m=JSON.stringify(v.getContents())}catch(x){m=v.getText()}return m},this.valueSetter=(v,C)=>{const g=y(this.format,this.service.config.format);if("html"===g)return this.sanitize&&(C=this.domSanitizer.sanitize(e.q3G.HTML,C)),v.clipboard.convert(C);if("json"===g)try{return JSON.parse(C)}catch(m){return[{insert:C}]}return C},this.selectionChangeHandler=(v,C,g)=>{const m=!v&&!!this.onModelTouched;!this.onBlur.observers.length&&!this.onFocus.observers.length&&!this.onSelectionChanged.observers.length&&!m||this.zone.run(()=>{null===v?this.onBlur.emit({editor:this.quillEditor,source:g}):null===C&&this.onFocus.emit({editor:this.quillEditor,source:g}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:C,range:v,source:g}),m&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(v,C,g)=>{const m=this.quillEditor.getText(),b=this.quillEditor.getContents();let x=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===x||"<div><br></div>"===x)&&(x=this.defaultEmptyValue);const T=this.trackChanges||this.service.config.trackChanges,L=("user"===g||T&&"all"===T)&&!!this.onModelChange;!this.onContentChanged.observers.length&&!L||this.zone.run(()=>{L&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:b,delta:v,editor:this.quillEditor,html:x,oldDelta:C,source:g,text:m}),this.cd.markForCheck()})},this.editorChangeHandler=(v,C,g,m)=>{if(this.onEditorChanged.observers.length)if("text-change"===v){const b=this.quillEditor.getText(),x=this.quillEditor.getContents();let T=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===T||"<div><br></div>"===T)&&(T=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:x,delta:C,editor:this.quillEditor,event:v,html:T,oldDelta:g,source:m,text:b}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:v,oldRange:g,range:C,source:m}),this.cd.markForCheck()})},this.document=t.get(f.K0)}static normalizeClassNames(t){return t.trim().split(" ").reduce((o,a)=>{const r=a.trim();return r&&o.push(r),o},[])}ngAfterViewInit(){(0,f.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().subscribe(t=>{this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin",this.preserveWhitespace?"<pre quill-editor-element></pre>":"<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const n=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),o=Object.assign({},this.modules||this.service.config.modules);n?o.toolbar=n:void 0===o.toolbar&&(o.toolbar=I.toolbar);let a=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===a&&(a="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(g=>{this.renderer.setStyle(this.editorElem,g,this.styles[g])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(g=>{const m=t.import(g.import);m.whitelist=g.whitelist,t.register(m,!0)}),this.customModules.forEach(({implementation:g,path:m})=>{t.register(m,g)});let r=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;r||(r=this.service.config.bounds?this.service.config.bounds:this.document.body);let u=this.debug;!u&&!1!==u&&this.service.config.debug&&(u=this.service.config.debug);let h=this.readOnly;!h&&!1!==this.readOnly&&(h=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let c=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(c=this.service.config.defaultEmptyValue);let v=this.scrollingContainer;!v&&null!==this.scrollingContainer&&(v=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let C=this.formats;if(!C&&void 0===C&&(C=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{var g,m,b;if(this.quillEditor=new t(this.editorElem,{bounds:r,debug:u,formats:C,modules:o,placeholder:a,readOnly:h,defaultEmptyValue:c,scrollingContainer:v,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const x=null===(m=null===(g=this.quillEditor)||void 0===g?void 0:g.theme)||void 0===m?void 0:m.tooltip,T=null===(b=null==x?void 0:x.root)||void 0===b?void 0:b.querySelector("input[data-link]");(null==T?void 0:T.dataset)&&(T.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===y(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const m=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(m,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observers.length||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){var t;this.dispose(),null===(t=this.quillSubscription)||void 0===t||t.unsubscribe(),this.quillSubscription=null}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=t.defaultEmptyValue.currentValue),t.styles){const n=t.styles.currentValue,o=t.styles.previousValue;o&&Object.keys(o).forEach(a=>{this.renderer.removeStyle(this.editorElem,a)}),n&&Object.keys(n).forEach(a=>{this.renderer.setStyle(this.editorElem,a,this.styles[a])})}if(t.classes){const n=t.classes.currentValue,o=t.classes.previousValue;o&&this.removeClasses(o),n&&this.addClasses(n)}t.debounceTime&&this.addQuillEventListeners()}}addClasses(t){i.normalizeClassNames(t).forEach(n=>{this.renderer.addClass(this.editorElem,n)})}removeClasses(t){i.normalizeClassNames(t).forEach(n=>{this.renderer.removeClass(this.editorElem,n)})}writeValue(t){if(this.filterNull&&null===t||(this.content=t,!this.quillEditor))return;const n=y(this.format,this.service.config.format),o=this.valueSetter(this.quillEditor,t);if(this.compareValues){const a=this.quillEditor.getContents();if(JSON.stringify(a)===JSON.stringify(o))return}t?"text"===n?this.quillEditor.setText(t):this.quillEditor.setContents(o):this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let n=!0;const o=this.quillEditor.getText(),a=this.trimOnValidation?o.trim().length:1===o.length&&0===o.trim().length?0:o.length-1,r=this.quillEditor.getContents().ops,u=r&&1===r.length&&["\n",""].includes(r[0].insert);return this.minLength&&a&&a<this.minLength&&(t.minLengthError={given:a,minLength:this.minLength},n=!1),this.maxLength&&a>this.maxLength&&(t.maxLengthError={given:a,maxLength:this.maxLength},n=!1),this.required&&!a&&u&&(t.requiredError={empty:!0},n=!1),n?null:t}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new nn.w0,this.subscription.add((0,N.R)(this.quillEditor,"selection-change").subscribe(([o,a,r])=>{this.selectionChangeHandler(o,a,r)}));let t=(0,N.R)(this.quillEditor,"text-change"),n=(0,N.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(t=t.pipe((0,k.b)(this.debounceTime)),n=n.pipe((0,k.b)(this.debounceTime))),this.subscription.add(t.subscribe(([o,a,r])=>{this.textChangeHandler(o,a,r)})),this.subscription.add(n.subscribe(([o,a,r,u])=>{this.editorChangeHandler(o,a,r,u)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Q.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(P))},i.\u0275dir=e.lG2({type:i,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[e.TTD]}),i})(),un=(()=>{class i extends pn{constructor(t,n,o,a,r,u,h,c){super(t,n,o,a,r,u,h,c)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Q.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["quill-editor"]],features:[e._Bn([{multi:!0,provide:l.JU,useExisting:(0,e.Gpc)(()=>i)},{multi:!0,provide:l.Cf,useExisting:(0,e.Gpc)(()=>i)}]),e.qOj],ngContentSelectors:gn,decls:1,vars:0,template:function(t,n){1&t&&(e.F$t(cn),e.Hsn(0))},styles:[":host{display:inline-block}\n"],encapsulation:2}),i})(),_n=(()=>{class i{static forRoot(t){return{ngModule:i,providers:[{provide:E,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.ez]]}),i})();function mn(i,s){1&i&&(e.TgZ(0,"p",15),e._uU(1,"You information submitted successfully"),e.qZA())}function hn(i,s){1&i&&(e.TgZ(0,"p",16),e._uU(1,"Submitting your information failed"),e.qZA())}function Cn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e._UZ(1,"br"),e.TgZ(2,"form"),e.TgZ(3,"div",0),e.TgZ(4,"div",8),e.TgZ(5,"quill-editor",9),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().entity.ContentData=o})("onSelectionChanged",function(o){return e.CHM(t),e.oxw().onSelectionChanged(o)})("onContentChanged",function(o){return e.CHM(t),e.oxw().onContentChanged(o)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(6,"br"),e._UZ(7,"br"),e.TgZ(8,"div",10),e.TgZ(9,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveContent()}),e._UZ(10,"span",12),e._uU(11," Save "),e.qZA(),e.qZA(),e.TgZ(12,"div",10),e.YNc(13,mn,2,0,"p",13),e.YNc(14,hn,2,0,"p",14),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.entity.ContentData)("modules",t.quillConfig),e.xp6(5),e.Udp("visibility",t.isSaving?"visible":"hidden"),e.xp6(3),e.Q6J("ngIf",1==t.savedSuccess),e.xp6(1),e.Q6J("ngIf",2==t.savedSuccess)}}function vn(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1," loading .... "),e.qZA())}let fn=(()=>{class i{constructor(t){this.api=t,this.loading=!0,this.entity=new p.Yh,this.savedSuccess=0,this.isSaving=!1,this.quillConfig={toolbar:{container:[["bold","italic","underline","strike"],["code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["link","image","video"]]}},this.onSelectionChanged=n=>{null==n.oldRange&&this.onFocus(),null==n.range&&this.onBlur()},this.onContentChanged=n=>{},this.onFocus=()=>{console.log("On Focus")},this.onBlur=()=>{console.log("Blurred")}}ngOnInit(){let t=new p.Pq;t.ContentKey="TermsAgreement",this.api.GetPageContent(t).subscribe(n=>{console.debug(n),this.loading=!1;let o=new p.Yh;o.ContentKey="TermsAgreement",n.ContentData&&(o.ContentData=n.ContentData),this.entity=o},n=>{this.loading=!1,console.debug(n)})}saveContent(){this.isSaving=!0,this.entity.ContentKey="TermsAgreement",console.debug(this.entity),this.api.SetPageContent(this.entity).subscribe(t=>{console.debug(t),this.isSaving=!1,this.savedSuccess=t.Success?1:2},t=>{this.isSaving=!1,console.debug(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-terms-agreement"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["style","padding-bottom: 30px;",4,"ngIf"],[4,"ngIf"],[2,"padding-bottom","30px"],[1,"col-md-12"],["name","content_data","placeholder","Enter Text",3,"ngModel","modules","ngModelChange","onSelectionChanged","onContentChanged"],[1,"d-flex","justify-content-center","mt-2"],["type","button",1,"btn","btn-primary",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h6",4),e._uU(5,"Terms and Agreement"),e.qZA(),e.YNc(6,Cn,15,6,"div",5),e.YNc(7,vn,2,0,"div",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[f.O5,l._Y,l.JL,l.F,un,l.JJ,l.On],styles:[""]}),i})();const Zn=["mailForm"];function Tn(i,s){1&i&&(e.TgZ(0,"p",32),e._uU(1," Smtp is required "),e.qZA())}function bn(i,s){1&i&&(e.TgZ(0,"p",32),e._uU(1," Port is required "),e.qZA())}function xn(i,s){1&i&&(e.TgZ(0,"p",32),e._uU(1," Email is required "),e.qZA())}function An(i,s){1&i&&(e.TgZ(0,"p",32),e._uU(1," Password is required "),e.qZA())}function Mn(i,s){1&i&&(e.TgZ(0,"p",33),e._uU(1,"You information submitted successfully"),e.qZA())}function qn(i,s){1&i&&(e.TgZ(0,"p",34),e._uU(1,"Submitting your information failed"),e.qZA())}function wn(i,s){if(1&i&&(e.TgZ(0,"p",34),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.TestMessage)}}function Sn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"form",8,9),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveContent()}),e.TgZ(3,"div",0),e.TgZ(4,"div",10),e.TgZ(5,"div",11),e.TgZ(6,"label",12),e._uU(7,"Smtp Server"),e.qZA(),e.TgZ(8,"input",13,14),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Settings.Smtp=o}),e.qZA(),e.YNc(10,Tn,2,0,"p",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",0),e.TgZ(12,"div",16),e.TgZ(13,"div",11),e.TgZ(14,"label",12),e._uU(15,"Smtp Port"),e.qZA(),e.TgZ(16,"input",17,18),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Settings.Port=o}),e.qZA(),e.YNc(18,bn,2,0,"p",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",0),e.TgZ(20,"div",10),e.TgZ(21,"div",11),e.TgZ(22,"label",12),e._uU(23,"Login Email"),e.qZA(),e.TgZ(24,"input",19,20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Settings.Email=o}),e.qZA(),e.YNc(26,xn,2,0,"p",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",0),e.TgZ(28,"div",10),e.TgZ(29,"div",11),e.TgZ(30,"label",12),e._uU(31,"Login Password"),e.qZA(),e.TgZ(32,"input",21,22),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Settings.Password=o}),e.qZA(),e.YNc(34,An,2,0,"p",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",0),e.TgZ(36,"div",10),e.TgZ(37,"div",11),e.TgZ(38,"div",23),e.TgZ(39,"input",24),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().Settings.UseSsl=o}),e.qZA(),e.TgZ(40,"label",25),e._uU(41," Use SSL "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",26),e.TgZ(43,"button",27),e._UZ(44,"span",28),e._uU(45," Save "),e.qZA(),e.TgZ(46,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().doTestEmail()}),e._UZ(47,"span",28),e._uU(48," Email Test "),e.qZA(),e.qZA(),e.TgZ(49,"div",26),e.YNc(50,Mn,2,0,"p",30),e.YNc(51,qn,2,0,"p",31),e.YNc(52,wn,2,1,"p",31),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(9),n=e.MAs(17),o=e.MAs(25),a=e.MAs(33),r=e.oxw();e.xp6(8),e.Q6J("ngModel",r.Settings.Smtp),e.xp6(2),e.Q6J("ngIf",t.invalid&&r.formSubmited),e.xp6(6),e.Q6J("ngModel",r.Settings.Port),e.xp6(2),e.Q6J("ngIf",n.invalid&&r.formSubmited),e.xp6(6),e.Q6J("ngModel",r.Settings.Email),e.xp6(2),e.Q6J("ngIf",o.invalid&&r.formSubmited),e.xp6(6),e.Q6J("ngModel",r.Settings.Password),e.xp6(2),e.Q6J("ngIf",a.invalid&&r.formSubmited),e.xp6(5),e.Q6J("ngModel",r.Settings.UseSsl),e.xp6(5),e.Udp("visibility",r.isSaving?"visible":"hidden"),e.xp6(3),e.Udp("visibility",r.emailTesting?"visible":"hidden"),e.xp6(3),e.Q6J("ngIf",1==r.savedSuccess),e.xp6(1),e.Q6J("ngIf",2==r.savedSuccess),e.xp6(1),e.Q6J("ngIf",3==r.savedSuccess)}}function Un(i,s){1&i&&(e.TgZ(0,"div"),e._uU(1," loading .... "),e.qZA())}let yn=(()=>{class i{constructor(t,n){this.api=t,this.auth=n,this.Settings=new p.UT,this.loading=!0,this.savedSuccess=0,this.isSaving=!1,this.emailTesting=!1,this.TestMessage="",this.formSubmited=!1}ngOnInit(){let t=new p.Pq;t.ContentKey="EmailSettings",this.api.GetPageContent(t).subscribe(n=>{console.debug(n),this.loading=!1;let o=new p.UT;if(n.ContentData){let a=JSON.parse(n.ContentData);a&&a.Email&&(o.Email=a.Email),a&&a.Password&&(o.Password=a.Password),a&&a.Port&&(o.Port=a.Port),a&&a.Smtp&&(o.Smtp=a.Smtp),a&&a.UseSsl&&(o.UseSsl=a.UseSsl)}this.Settings=o},n=>{this.loading=!1,console.debug(n)})}saveContent(){if(this.formSubmited=!0,!this.mailForm.valid)return;this.savedSuccess=0,this.isSaving=!0;let t=new p.Yh;t.ContentKey="EmailSettings",t.ContentData=JSON.stringify(this.Settings),console.debug(t),this.api.SetPageContent(t).subscribe(n=>{console.debug(n),this.isSaving=!1,this.savedSuccess=n.Success?1:2},n=>{this.isSaving=!1,console.debug(n)})}doTestEmail(){this.savedSuccess=0,this.emailTesting=!0,this.api.testEmail(this.auth.user).subscribe(t=>{console.debug(t),this.emailTesting=!1,this.TestMessage=t.Message,this.savedSuccess=3},t=>{this.emailTesting=!1,console.debug(t),this.TestMessage="Failed to send command to server",this.savedSuccess=3})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(q.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-email-settings"]],viewQuery:function(t,n){if(1&t&&e.Gf(Zn,5),2&t){let o;e.iGM(o=e.CRH())&&(n.mailForm=o.first)}},decls:8,vars:2,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],["style","padding-bottom: 30px;",4,"ngIf"],[4,"ngIf"],[2,"padding-bottom","30px"],[3,"ngSubmit"],["mailForm","ngForm"],[1,"col-sm-6"],[1,"mb-3"],[1,"form-label"],["type","text","name","Smtp","placeholder","Smtp","minlength","3","required","",1,"form-control",3,"ngModel","ngModelChange"],["Smtp","ngModel"],["class","text-danger mt-1",4,"ngIf"],[1,"col-sm-3"],["type","text","name","Port","placeholder","Port","required","",1,"form-control",3,"ngModel","ngModelChange"],["Port","ngModel"],["type","email","name","Email","placeholder","Email","email","","required","",1,"form-control",3,"ngModel","ngModelChange"],["Email","ngModel"],["type","password","name","Password","placeholder","Password","required","",1,"form-control",3,"ngModel","ngModelChange"],["Password","ngModel"],[1,"form-check","form-check-inline"],["type","checkbox","id","UseSslID","name","UseSsl",1,"form-check-input",3,"ngModel","ngModelChange"],["for","UseSslID",1,"form-check-label"],[1,"d-flex","justify-content-center","mt-2"],["type","submit",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-default",3,"click"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger","mt-1"],[1,"text-success"],[1,"text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h6",4),e._uU(5,"Emails Server Settings"),e.qZA(),e.YNc(6,Sn,53,16,"div",5),e.YNc(7,Un,2,0,"div",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading))},directives:[f.O5,l._Y,l.JL,l.F,l.Fj,l.wO,l.Q7,l.JJ,l.On,l.on,l.Wl],styles:[""]}),i})();var Nn=d(510);const In=["lgModal"];function Rn(i,s){1&i&&(e.TgZ(0,"p",21),e._uU(1,"Status is required"),e.qZA())}function Jn(i,s){1&i&&(e.TgZ(0,"p",21),e._uU(1,"Medical Representative is required"),e.qZA())}function Dn(i,s){if(1&i&&(e.TgZ(0,"div",8),e._UZ(1,"label",22),e.TgZ(2,"div",13),e.TgZ(3,"p",21),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(3);e.xp6(4),e.Oqu(t.errorMessage)}}function Qn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"label",10),e._uU(4,"Country:"),e.qZA(),e.TgZ(5,"label",11),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",8),e.TgZ(8,"div",9),e.TgZ(9,"label",10),e._uU(10,"Speciality:"),e.qZA(),e.TgZ(11,"label",11),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"div",9),e.TgZ(15,"label",10),e._uU(16,"Join Date:"),e.qZA(),e.TgZ(17,"label",11),e._uU(18),e.ALo(19,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",8),e.TgZ(21,"label",12),e._uU(22,"Active Status:"),e.qZA(),e.TgZ(23,"div",13),e.TgZ(24,"ng-select",14,15),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).Current.User.IsActive=o}),e.qZA(),e.YNc(26,Rn,2,0,"p",16),e.qZA(),e.qZA(),e.TgZ(27,"div",8),e.TgZ(28,"label",17),e._uU(29,"Medical Representative:"),e.qZA(),e.TgZ(30,"div",13),e.TgZ(31,"ng-select",18,19),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).Current.User.MedicalRepID=o}),e.qZA(),e.YNc(33,Jn,2,0,"p",16),e.qZA(),e.qZA(),e.YNc(34,Dn,5,1,"div",20),e.qZA()}if(2&i){const t=e.MAs(25),n=e.MAs(32),o=e.oxw(2);e.xp6(6),e.Oqu(o.Current.Country),e.xp6(6),e.Oqu(o.Current.User.Speciality),e.xp6(6),e.Oqu(e.xi3(19,12,o.Current.Stamp,"yyyy-MM-dd")),e.xp6(6),e.Q6J("items",o.activeStatuses)("ngModel",o.Current.User.IsActive)("searchable",!1),e.xp6(2),e.Q6J("ngIf",t.invalid),e.xp6(5),e.Q6J("items",o.medicalReps)("ngModel",o.Current.User.MedicalRepID)("searchable",!1),e.xp6(2),e.Q6J("ngIf",n.invalid),e.xp6(1),e.Q6J("ngIf",o.errorMessage)}}function kn(i,s){1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"span",25),e._uU(4,"Loading..."),e.qZA(),e.qZA(),e.qZA(),e.qZA())}function En(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close("by: close button")}),e._uU(2,"Close"),e.qZA(),e.TgZ(3,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().removeUser(o)}),e.TgZ(4,"span",29),e._UZ(5,"span",30),e._uU(6," Delete Doctor "),e.qZA(),e.qZA(),e.TgZ(7,"button",31),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().edit_User(o)}),e.TgZ(8,"span",29),e._UZ(9,"span",30),e._uU(10," Save "),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",t.savingUser||t.removingUser),e.xp6(2),e.Udp("visibility",t.removingUser?"visible":"hidden"),e.xp6(2),e.Q6J("disabled",t.savingUser||t.removingUser),e.xp6(2),e.Udp("visibility",t.savingUser?"visible":"hidden")}}function Pn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e.TgZ(2,"span",3),e._uU(3,"Doctor:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t).$implicit.close("by: close icon")}),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,Qn,35,15,"div",6),e.YNc(8,kn,5,0,"div",6),e.qZA(),e.YNc(9,En,11,6,"div",7)}if(2&i){const t=e.oxw();e.xp6(4),e.AsE(" ",t.Current.Name," ",t.Current.LastName,""),e.xp6(3),e.Q6J("ngIf",!t.loading),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading)}}let Ln=(()=>{class i{constructor(t,n){this.adminApi=t,this.modalService=n,this.activeStatuses=[{value:!0,name:"Active"},{value:!1,name:"In Active"}],this.medicalReps=[],this.errorMessage="",this.Current=new p.fv,this.UserChanged=new e.vpe,this.savingUser=!1,this.removingUser=!1,this.loading=!1}ngOnInit(){}showDlg(){this.medicalReps=this.adminApi.MedRepUsers,this.removingUser=!1,this.savingUser=!1,this.errorMessage="",console.debug(this.Current),this.modalService.open(this.lgModal,{size:"lg",centered:!0}).result.then(t=>{}).catch(t=>{})}edit_User(t){this.savingUser=!0,this.adminApi.editUser(this.Current.User).subscribe(n=>{this.savingUser=!1,n.Success?(this.UserChanged.emit(),t.close(),this.Current=new p.fv):(this.savingUser=!1,this.errorMessage=n.Message)},n=>{console.debug(n),this.savingUser=!1,this.errorMessage="failed: "+n.message})}removeUser(t){this.removingUser=!0,this.adminApi.deleteUser(this.Current.User).subscribe(n=>{this.removingUser=!1,n.Success?(this.UserChanged.emit(),t.close(),this.Current=new p.fv):(this.removingUser=!1,this.errorMessage=n.Message)},n=>{console.debug(n),this.removingUser=!1,this.errorMessage="failed: "+n.message})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(Z.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-doctor-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(In,5),2&t){let o;e.iGM(o=e.CRH())&&(n.lgModal=o.first)}},inputs:{Current:"Current"},outputs:{UserChanged:"UserChanged"},decls:2,vars:0,consts:[["lgModal",""],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"text-muted"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"row"],[1,"col-sm-12"],["for","dlg_country_id",1,"col-sm-4","text-muted"],["for","dlg_country_id",1,"col-sm-7","mb-3"],["for","activeStatus",1,"col-sm-4","text-muted"],[1,"col-sm-7","mb-3"],["id","activeStatus","name","activeStatus","placeholder","activeStatus","bindLabel","name","bindValue","value","required","",3,"items","ngModel","searchable","ngModelChange"],["activeStatus","ngModel"],["class","text-danger mt-1",4,"ngIf"],["for","medicalRep",1,"col-sm-4","text-muted"],["id","medicalRep","name","medicalRep","placeholder","Medical Representative","bindLabel","FullName","bindValue","ID","required","",3,"items","ngModel","searchable","ngModelChange"],["medicalRep","ngModel"],["class","row",4,"ngIf"],[1,"text-danger","mt-1"],[1,"col-sm-4","text-muted"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[2,"white-space","nowrap"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&e.YNc(0,Pn,10,5,"ng-template",null,0,e.W1O)},directives:[f.O5,S.w9,l.Q7,l.JJ,l.On],pipes:[f.uU],styles:[""]}),i})();const Fn=["userCtr"];function On(i,s){1&i&&(e._uU(0),e.ALo(1,"date")),2&i&&e.hij(" ",e.xi3(1,1,s.value,"yyyy-MM-dd")," ")}function Yn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().editItem(a)}),e._UZ(1,"i",32),e._uU(2," Edit "),e.qZA()}}const Hn=[{path:"",component:O,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:H},{path:"terms",component:fn},{path:"emails",component:yn},{path:"admin-case-review",component:Ut},{path:"users",component:Ht},{path:"pending",component:(()=>{class i{constructor(t,n,o){this.api=t,this.auth=n,this.nav=o,this.loadingIndicator=!1,this.TotalCount=0,this.pageNumber=0,this.ColumnMode=_.hq,this.SelectionType=_.RT,this.caseList=[],this.SearchModel=new p.uE,this.selected=[],o.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.doSearchCases()}doSearch(){this.TotalCount=0,this.pageNumber=0,this.SearchModel.Page=0,this.doSearchCases()}doSearchCases(){this.loadingIndicator=!0,this.caseList=[],this.SearchModel.Page=this.pageNumber,"MedicalRepresentative"==this.auth.user.Role&&(this.SearchModel.MedicalRepID=this.auth.user.ID),this.api.getPendingMessages(this.SearchModel).subscribe(t=>{console.debug(t),this.loadingIndicator=!1;let n=[];t.Success&&(t.Cases.forEach(o=>{let a=new p.Vx;a.CaseNumber=o.CaseNumber,a.CaseStage=o.CaseStage,a.Doctor=o.Doctor,a.ID=o.ID,a.Message=o.Message,a.Patient=o.Patient,n.push(a)}),this.caseList=n,this.TotalCount=t.TotalCount,console.debug(this.caseList))},t=>{this.loadingIndicator=!1,console.debug(t),t.message?alert(t.message):alert("Failed")})}onSort(t){console.debug(t),t&&t.sorts&&t.sorts.length>0&&(this.SearchModel.SortDir=t.sorts[0].dir,this.SearchModel.SortProp=t.sorts[0].prop,this.doSearchCases())}setPage(t){console.debug(t),this.pageNumber=t.offset,this.doSearchCases()}reviewCase(t){this.nav.navigate(["/admin/admin-case-review",{id:t.selected[0].ID}])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(q.O),e.Y36(A.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-pending-chat"]],decls:24,vars:13,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row",3,"ngSubmit"],["searchForm",""],[1,"col-sm-4"],["for","exampleInputEmail1",1,"form-label"],[1,"input-group"],["type","text","id","searchTextID","placeholder","Search","name","searchText",1,"form-control",3,"ngModel","ngModelChange"],["searchTextID","ngModel"],["type","submit",1,"input-group-text","btn-link","custom_btn_icon"],[1,"feather","icon-search"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","scrollbarH","footerHeight","limit","externalPaging","externalSorting","count","offset","selectionType","page","sort","select"],["name","Number","prop","CaseNumber",3,"width"],["name","Patient","prop","Patient"],["name","Doctor","prop","Doctor"],["name","Message","prop","Message"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h6",4),e._uU(5,"Pending Messages"),e.qZA(),e.TgZ(6,"form",5,6),e.NdJ("ngSubmit",function(){return n.doSearch()}),e._UZ(8,"div",7),e._UZ(9,"div",7),e.TgZ(10,"div",7),e.TgZ(11,"label",8),e._uU(12,"Searching"),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"input",10,11),e.NdJ("ngModelChange",function(a){return n.SearchModel.SearchText=a}),e.qZA(),e.TgZ(16,"button",12),e._UZ(17,"i",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",14),e.TgZ(19,"ngx-datatable",15),e.NdJ("page",function(a){return n.setPage(a)})("sort",function(a){return n.onSort(a)})("select",function(a){return n.reviewCase(a)}),e._UZ(20,"ngx-datatable-column",16),e._UZ(21,"ngx-datatable-column",17),e._UZ(22,"ngx-datatable-column",18),e._UZ(23,"ngx-datatable-column",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(14),e.Q6J("ngModel",n.SearchModel.SearchText),e.xp6(5),e.Q6J("rows",n.caseList)("loadingIndicator",n.loadingIndicator)("columnMode",n.ColumnMode.force)("scrollbarH",!0)("footerHeight",50)("limit",10)("externalPaging",!0)("externalSorting",!0)("count",n.TotalCount)("offset",n.pageNumber)("selectionType",n.SelectionType.single),e.xp6(1),e.Q6J("width",60))},directives:[l._Y,l.JL,l.F,l.Fj,l.JJ,l.On,_.nE,_.UC],styles:[""]}),i})()},{path:"doctors",component:(()=>{class i{constructor(t,n,o){this.api=t,this.auth=n,this.nav=o,this.medicalReps=[],this.loadingIndicator=!1,this.TotalCount=0,this.pageNumber=0,this.ColumnMode=_.hq,this.SelectionType=_.RT,this.usersList=[],this.SearchModel=new p.uE,this.countries=[],this.states=[],this.selected=[],this.Current=new p.fv,o.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.fillMedicRep(),this.countries=this.auth.countries,this.SearchModel.InitRequest=!0,this.doSearchUsers()}fillMedicRep(){if("MedicalRepresentative"==this.auth.user.Role){let t=[];this.api.MedRepUsers.forEach(n=>{n.ID==this.auth.user.ID&&t.push(n)}),this.medicalReps=t,console.debug(this.medicalReps)}else this.medicalReps=this.api.MedRepUsers}doSearch(){this.TotalCount=0,this.pageNumber=0,this.SearchModel.Page=0,this.SearchModel.InitRequest=!1,this.doSearchUsers()}doSearchUsers(){console.debug(this.auth.user),this.loadingIndicator=!0,this.usersList=[],this.SearchModel.Page=this.pageNumber,null==this.SearchModel.CountryID&&(this.SearchModel.CountryID=""),null==this.SearchModel.States&&(this.SearchModel.States=""),"MedicalRepresentative"==this.auth.user.Role&&(this.SearchModel.MedicalRepID=this.auth.user.ID),this.api.getUsers(this.SearchModel).subscribe(t=>{console.debug(t),this.loadingIndicator=!1,t&&t.Users.length>0&&(this.usersList=t.Users,this.TotalCount=t.TotalCount),this.SearchModel.InitRequest&&this.api.MedRepUsers.length>0&&this.fillMedicRep()},t=>{this.loadingIndicator=!1,console.debug(t),t.message?alert(t.message):alert("Failed")})}onSort(t){console.debug(t),t&&t.sorts&&t.sorts.length>0&&(this.SearchModel.SortDir=t.sorts[0].dir,this.SearchModel.SortProp=t.sorts[0].prop,this.doSearchUsers())}setPage(t){console.debug(t),this.pageNumber=t.offset,this.doSearchUsers()}onUserChanged(t){this.doSearch()}editItem(t){this.Current=t,this.userCtr.showDlg()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.o),e.Y36(q.O),e.Y36(A.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-doctors"]],viewQuery:function(t,n){if(1&t&&e.Gf(Fn,5),2&t){let o;e.iGM(o=e.CRH())&&(n.userCtr=o.first)}},decls:39,vars:18,consts:[[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row",3,"ngSubmit"],["searchForm",""],[1,"col-sm-4"],["for","exampleInputUsername1",1,"form-label"],["id","searchCountryID","name","CountryID","placeholder","Country","bindLabel","Country","bindValue","ID",3,"items","ngModel","searchable","change","ngModelChange"],["searchCountryID","ngModel"],["id","medicalRep","name","medicalRep","placeholder","Medical Representative","bindLabel","FullName","bindValue","ID",3,"items","ngModel","searchable","change","ngModelChange"],["medicalRep","ngModel"],["for","exampleInputEmail1",1,"form-label"],[1,"input-group"],["type","text","id","searchTextID","placeholder","Search","name","searchText",1,"form-control",3,"ngModel","ngModelChange"],["searchTextID","ngModel"],["type","submit",1,"input-group-text","btn-link","custom_btn_icon"],[1,"feather","icon-search"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","scrollbarH","footerHeight","limit","externalPaging","externalSorting","count","offset","page","sort"],["name","User Number","prop","UserNumber"],["name","Full Name","prop","FullName"],["name","Email","prop","Email"],["name","Country","prop","Country"],["name","Status","prop","ActiveStatus"],["name","Join Date","prop","Stamp"],["ngx-datatable-cell-template",""],["name","Edit"],[3,"Current","UserChanged"],["userCtr",""],[1,"btn","btn-outline-primary",3,"click"],[1,"feather","icon-edit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h6",4),e._uU(5,"Users List"),e.qZA(),e.TgZ(6,"form",5,6),e.NdJ("ngSubmit",function(){return n.doSearch()}),e.TgZ(8,"div",7),e.TgZ(9,"label",8),e._uU(10,"Country"),e.qZA(),e.TgZ(11,"ng-select",9,10),e.NdJ("change",function(){return n.doSearch()})("ngModelChange",function(a){return n.SearchModel.CountryID=a}),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"label",8),e._uU(15,"Medical Representative"),e.qZA(),e.TgZ(16,"ng-select",11,12),e.NdJ("change",function(){return n.doSearch()})("ngModelChange",function(a){return n.SearchModel.MedicalRepID=a}),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"label",13),e._uU(20,"Searching"),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"input",15,16),e.NdJ("ngModelChange",function(a){return n.SearchModel.SearchText=a}),e.qZA(),e.TgZ(24,"button",17),e._UZ(25,"i",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",19),e.TgZ(27,"ngx-datatable",20),e.NdJ("page",function(a){return n.setPage(a)})("sort",function(a){return n.onSort(a)}),e._UZ(28,"ngx-datatable-column",21),e._UZ(29,"ngx-datatable-column",22),e._UZ(30,"ngx-datatable-column",23),e._UZ(31,"ngx-datatable-column",24),e._UZ(32,"ngx-datatable-column",25),e.TgZ(33,"ngx-datatable-column",26),e.YNc(34,On,2,4,"ng-template",27),e.qZA(),e.TgZ(35,"ngx-datatable-column",28),e.YNc(36,Yn,3,0,"ng-template",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"app-doctor-modal",29,30),e.NdJ("UserChanged",function(a){return n.onUserChanged(a)}),e.qZA()),2&t&&(e.xp6(11),e.Q6J("items",n.countries)("ngModel",n.SearchModel.CountryID)("searchable",!1),e.xp6(5),e.Q6J("items",n.medicalReps)("ngModel",n.SearchModel.MedicalRepID)("searchable",!1),e.xp6(6),e.Q6J("ngModel",n.SearchModel.SearchText),e.xp6(5),e.Q6J("rows",n.usersList)("loadingIndicator",n.loadingIndicator)("columnMode",n.ColumnMode.force)("scrollbarH",!0)("footerHeight",50)("limit",10)("externalPaging",!0)("externalSorting",!0)("count",n.TotalCount)("offset",n.pageNumber),e.xp6(10),e.Q6J("Current",n.Current))},directives:[l._Y,l.JL,l.F,S.w9,l.JJ,l.On,l.Fj,_.nE,_.UC,_.vq,Ln],pipes:[f.uU],styles:[""]}),i})()},{path:"packages",component:en},{path:"viewrevision",component:Nn.E}]}];let Vn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[f.ez,l.u5,l.UX,F.JF,A.Bz.forChild(Hn),_.xD,J._,S.A0,Z.Oz,Z.IJ,_n,J._]]}),i})()}}]);